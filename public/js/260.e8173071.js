"use strict";(self["webpackChunkyogabhyas"]=self["webpackChunkyogabhyas"]||[]).push([[260,442],{8836:function(t,e,o){o.r(e),o.d(e,{default:function(){return xt}});var s=o(3396),i=o(7139),a=o(9806);const l={class:"relative"},c={class:""},r={class:"flex mt-32 mx-28"},n={class:"w-4/6"},d={class:"flex justify-between items-baseline"},h=(0,s._)("div",{class:"text-4xl font-bold font-calibri"},"Book Cart",-1),u={class:"text-2xl font font-calibri"},m=(0,s._)("div",{class:"w-full bg-gray-300 h-px mt-5"},null,-1),k={key:0},p={key:0},b=(0,s.uE)('<div class="flex"><div class="w-3/6"><div class="flex justify-between"><p class="mt-6 pl-2 text-gray-400">Product Details</p></div></div><div class="w-1/6"><div class="flex justify-between"><p class="mt-6 ml-6 text-gray-400">Quantity</p></div></div><div class="w-1/6"><div class="flex justify-between"><p class="mt-6 pl-10 text-gray-400">Price</p></div></div><div class="w-1/6"><div class="flex justify-between"><p class="mt-6 pl-12 text-gray-400">Total</p></div></div></div>',1),v=[b],g={class:"w-6/6 pt-4"},x={key:0},y={key:0},w=(0,s._)("div",{style:{"text-align":"center"}},[(0,s._)("img",{src:a,alt:"",style:{height:"400px",margin:"auto"}}),(0,s._)("div",{style:{position:"relative",bottom:"10vh","font-size":"32px",color:"#476582"}},"Your Cart is empty :("),(0,s._)("div",{style:{position:"relative",bottom:"10vh","font-size":"20px",color:"#476582a4"}},"Looks like you have not added anything to your Cart.")],-1),f=[w],_={key:1},D=(0,s._)("div",{class:"h-96 w-px bg-gray-300 ml-4 mr-4"},null,-1),C={class:"w-2/6"},I=(0,s._)("div",{class:"text-4xl font-bold font-calibri"},"Order Summary",-1),B=(0,s._)("div",{class:"w-full bg-gray-300 h-px mt-5"},null,-1),L={class:"flex justify-between"},P={class:"pt-8"},z={class:"pt-8"},q={class:"flex justify-between"},U=(0,s._)("p",{class:"pt-8"},"DISCOUNT ",-1),j={class:"pt-8"},S={class:"flex justify-between"},Z=(0,s._)("p",{class:"pt-8"},"DELIVERY CHARGES",-1),E={class:"pt-8"},O={class:"flex justify-between"},T=(0,s._)("p",{class:"pt-40 text-xl font-bold"},"TOTAL COST",-1),R={class:"pt-40 text-xl font-bold"},H={class:"flex justify-center pt-6"},A=(0,s._)("div",{class:"flex py-2 items-center text-sm text-black rounded-md text-center cursor-pointer fill-current hover:text-secondary-1 font-sm"},[(0,s._)("svg",{class:"w-6",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 400.004 400.004",style:{"enable-background":"new 0 0 400.004 400.004"},"xml:space":"preserve"},[(0,s._)("g",null,[(0,s._)("path",{d:"M382.688,182.686H59.116l77.209-77.214c6.764-6.76,6.764-17.726,0-24.485c-6.764-6.764-17.73-6.764-24.484,0L5.073,187.757\n\t            \tc-6.764,6.76-6.764,17.727,0,24.485l106.768,106.775c3.381,3.383,7.812,5.072,12.242,5.072c4.43,0,8.861-1.689,12.242-5.072\n\t            \tc6.764-6.76,6.764-17.726,0-24.484l-77.209-77.218h323.572c9.562,0,17.316-7.753,17.316-17.315\n               \tC400.004,190.438,392.251,182.686,382.688,182.686z"})])]),(0,s._)("div",{class:"pl-2 text-xl"},"Continue Shopping")],-1),M=[A];function N(t,e,o,a,b,w){const A=(0,s.up)("Header"),N=(0,s.up)("OrderCart"),Y=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",l,[(0,s._)("div",c,[(0,s.Wm)(A,{userID:b.userID,class:"fixed z-10 w-full top-0"},null,8,["userID"])])]),(0,s._)("div",r,[(0,s._)("div",n,[(0,s._)("div",d,[h,(0,s._)("div",u,(0,i.zw)(b.items)+" items",1)]),m,(0,s._)("div",null,[this.isLoaded?((0,s.wg)(),(0,s.iD)("div",k,[0!==this.books.length?((0,s.wg)(),(0,s.iD)("div",p,v)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),(0,s._)("div",g,[this.isLoaded?((0,s.wg)(),(0,s.iD)("div",x,[0===this.books.length?((0,s.wg)(),(0,s.iD)("div",y,f)):((0,s.wg)(),(0,s.iD)("div",_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.books,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id},[(0,s.Wm)(N,{onUpdateCart:w.updateCart,onCalculate:w.calculate,bookName:t.name,bookAuthor:t.author,bookSubject:"English",bookGenre:"-",bookDate:t.publicationYear,bookImageURL:t.url,bookQuantity:"0",bookPrice:t.price,id:this.userID,bookID:t.id},null,8,["onUpdateCart","onCalculate","bookName","bookAuthor","bookDate","bookImageURL","bookPrice","id","bookID"])])))),128))]))])):(0,s.kq)("",!0)])])]),D,(0,s._)("div",C,[I,B,(0,s._)("div",L,[(0,s._)("p",P,"ITEMS "+(0,i.zw)(b.items),1),(0,s._)("p",z,(0,i.zw)(b.cost),1)]),(0,s._)("div",q,[U,(0,s._)("p",j,(0,i.zw)(b.dis),1)]),(0,s._)("div",S,[Z,(0,s._)("p",E,(0,i.zw)(b.deliv*this.items),1)]),(0,s._)("div",O,[T,(0,s._)("p",R,(0,i.zw)(b.cost+b.deliv*this.items),1)]),(0,s._)("div",H,[(0,s._)("button",{class:"bg-secondary-1 hover:bg-primary-1 hover:text-black text-white font-semibold text-xl h-10 pl-40 pr-40 tracking-widest",onClick:e[0]||(e[0]=(...t)=>w.checkout&&w.checkout(...t))},"CHECKOUT")]),(0,s.Wm)(Y,{to:{path:"/home",query:{id:this.userID}}},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"ml-18 mt-8 flex",onClick:t=>!0},M)])),_:1},8,["to"])])])],64)}o(6699);var Y=o(5103),F=o(9308),Q=o(9211),$=o(8207);const G={class:"mt-4"},W={class:"w-6/6 border-2 h-40"},K={class:"flex"},V={class:"flex w-1/6"},J=["src"],X={class:"w-2/6"},tt={class:"mt-2 ml-2 font-bold text-gray-800 text-md cursor-pointer hover:text-secondary-1"},et={class:"mt-2 ml-2 text-black-400 text-sm cursor-pointer"},ot={class:"mt-2 ml-2 text-black-400 text-sm cursor-pointer"},st={class:"mt-2 ml-2 text-black-400 text-sm cursor-pointer"},it={class:"mt-2 ml-2 text-black-400 text-sm cursor-pointer"},at={class:"flex flex-col items-end justify-evenly mt-5"},lt={class:"flex items-center"},ct={class:"flex w-28"},rt={class:"py-1 h-8 w-20 border-2 text-sm text-center font-medium"},nt={class:"ml-[70px] font-bold text-gray-800 text-md"},dt={class:"ml-24 font-bold text-gray-800 text-md"};function ht(t,e,o,a,l,c){return(0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("div",W,[(0,s._)("div",K,[(0,s._)("div",V,[(0,s._)("img",{class:"h-36 object-fill border-none w-28",src:o.bookImageURL,alt:""},null,8,J)]),(0,s._)("div",X,[(0,s._)("div",tt,(0,i.zw)(o.bookName),1),(0,s._)("p",et,"author: "+(0,i.zw)(o.bookAuthor),1),(0,s._)("p",ot,"subject: "+(0,i.zw)(o.bookSubject),1),(0,s._)("p",st,"genre:"+(0,i.zw)(o.bookGenre),1),(0,s._)("p",it,"publication date:"+(0,i.zw)(o.bookDate),1)]),(0,s._)("div",at,[(0,s._)("div",lt,[(0,s._)("div",ct,[(0,s._)("div",{class:"py-1 h-8 w-8 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium",onClick:e[0]||(e[0]=t=>c.decrement())},"-"),(0,s._)("div",rt,(0,i.zw)(l.quantity),1),(0,s._)("div",{class:"py-1 h-8 w-8 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium",onClick:e[1]||(e[1]=t=>c.increment())},"+")]),(0,s._)("div",nt,"₹"+(0,i.zw)(this.price),1),(0,s._)("div",dt,"₹"+(0,i.zw)(l.total),1)]),(0,s._)("div",null,[(0,s._)("div",{class:"py-2 w-36 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium",onClick:e[2]||(e[2]=(...t)=>c.removeFromCart&&c.removeFromCart(...t))}," Remove from Cart ")])])])])])}var ut=o(6780),mt={data(){return{total:0,query:"/book",id:this.$route.query.id,quantity:parseInt(this.bookQuantity),price:parseInt(this.bookPrice),total:parseInt(this.bookPrice)*parseInt(this.bookQuantity)}},emits:["updateCart"],props:["updateCart","bookName","bookAuthor","bookSubject","bookGenre","bookDate","bookImageURL","bookPrice","bookID","bookQuantity"],methods:{totalPrice(){this.total=this.price*this.quantity},increment(){this.quantity++,this.totalPrice(),this.$emit("calculate",this.price,1,this.bookID)},decrement(){this.quantity>0&&(this.quantity--,this.totalPrice(),this.$emit("calculate",-this.price,-1,this.bookID))},removeFromCart(){console.log(this.id);const t=ut.Z.firestore();console.log("Inside removeFromWishList() method");try{t.collection("Users").doc(this.id).get().then((e=>{console.log(e.data());var o=e.data().addrLine1,s=e.data().addrLine2,i=e.data().mobile,a=e.data().city,l=e.data().landmark,c=e.data().name,r=e.data().state,n=e.data().zipcode,d=e.data().cart||[],h=e.data().wishList||[],u=e.data().orders||[],m=e.data().email;let k=[];k=d.filter((t=>t!==this.bookID)),console.log(this.bookID),console.log(d),console.log("removed array "+k),this.$emit("updateCart",k),t.collection("Users").doc(this.id).set({addrLine1:o,addrLine2:s,cart:k,city:a,landmark:l,mobile:i,name:c,orders:u,state:r,wishList:h,zipcode:n,email:m}).then((t=>{console.log(k)})),console.log("Data updated successfully")}))}catch(e){console.log(e)}}},mounted(){}},kt=o(89);const pt=(0,kt.Z)(mt,[["render",ht]]);var bt=pt,vt=(o(2253),{data(){return{cost:0,items:0,prices:[],orderPlaced:!1,dis:0,deliv:40,userID:this.$route.query.id,books:[],checkoutBooksUnique:new Set,checkoutBooks:new Map,checkoutBooksPrice:new Map,isLoaded:!1}},async created(){const t=ut.Z.firestore();console.log("Inside created() method");try{t.collection("Users").doc(this.userID).get().then((e=>{console.log(e.data());var o=e.data().cart;console.log(o);for(let s=0;s<o.length;s++)t.collection("books").doc(o[s]).get().then((t=>{var e=t.data();e.id=o[s],this.books.push(e)}));console.log("Searched Books array"),console.log(this.books)})).finally((()=>{this.isLoaded=!0,console.log(this.isLoaded)}))}catch(e){console.log(e)}},components:{Header:Y.Z,Filter:F.Z,LatestBooks:Q.Z,ResultBook:$.Z,OrderSummary:bt,OrderCart:bt},methods:{async checkout(){console.log("Inside Checkout function");var t=0,e=0,o=[];if(this.checkoutBooksUnique.forEach((s=>{console.log(s),console.log(s+" "+this.checkoutBooksPrice.get(s)*this.checkoutBooks.get(s)),t+=this.checkoutBooksPrice.get(s)*this.checkoutBooks.get(s),e+=this.checkoutBooks.get(s),o.push(this.checkoutBooks.get(s))})),0===e)return alert("You cannot checkout with an empty cart!");if(this.orderPlaced)return alert("Please wait until the current order is being processed");console.log(this.orderPlaced),this.orderPlaced=!0;var s=[];this.checkoutBooksUnique.forEach((t=>{s.push(t)}));var i=t+this.deliv*e;let a="";var l,c=Date.now();await ut.Z.firestore().collection("Orders").doc(c+this.userID).set({books:s,quantity:o,amount:t,total:i,shippingCharges:this.deliv,orderDate:c,expectedDate:c+12096e5,packageNo:"",discount:0,orderCompleted:!1,bookDelivered:0}).then((t=>{a=c+this.userID,console.log(a)})),console.log(a),console.log(this.userID),await ut.Z.firestore().collection("Users").doc(this.userID).get().then((t=>{console.log(t.data()),l=t.data()})),console.log(l);var r=l.orders??[];r.push(a),ut.Z.firestore().collection("Users").doc(this.userID).set({addrLine1:l.addrLine1,addrLine2:l.addrLine2,cart:[],city:l.city,landmark:l.landmark,mobile:l.mobile,name:l.name,orders:r,state:l.state,wishList:l.wishList,zipcode:l.zipcode,email:l.email}).finally((()=>{this.books=[],this.items=0,this.cost=0,this.discount=0,this.orderPlaced=!1,this.checkoutBooksUnique=new Set,this.checkoutBooks=new Map,this.checkoutBooksPrice=new Map,alert("Order Placed Successfully")}))},calculateTotal(t){this.items+=t,this.cost+=this.prices[this.prices.length-1],console.log("current cost : "+this.cost)},calculate(t,e,o){this.prices.push(t),console.log(o),this.calculateTotal(e),this.checkoutBooksUnique.add(o);var s=this.checkoutBooks.get(o)||0;1===e?this.checkoutBooks.set(o,s+1):-1===e&&s>0&&this.checkoutBooks.set(o,s-1),t>0&&this.checkoutBooksPrice.set(o,t),console.log(this.checkoutBooks),console.log(this.checkoutBooksUnique),console.log(this.checkoutBooksPrice)},updateCart(t){var e=[];this.books.forEach((o=>{t.includes(o.id)&&e.push(o)})),this.books=e}}});const gt=(0,kt.Z)(vt,[["render",N]]);var xt=gt},9806:function(t,e,o){t.exports=o.p+"img/empty-box.dd1773f0.png"}}]);
//# sourceMappingURL=260.e8173071.js.map