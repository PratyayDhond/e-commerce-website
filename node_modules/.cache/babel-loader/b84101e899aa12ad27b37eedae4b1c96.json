{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"relative\"\n};\nconst _hoisted_2 = {\n  class: \"\"\n};\nconst _hoisted_3 = {\n  class: \"absoulute\"\n};\nconst _hoisted_4 = {\n  class: \"\"\n};\nconst _hoisted_5 = {\n  class: \"fixed w-full\"\n};\nconst _hoisted_6 = {\n  class: \"mt-20 absolute top-6 left-96\"\n};\nconst _hoisted_7 = {\n  class: \"w-240\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"text-3xl font-bold text-gray-700\\\">ORDER DETAILS</div><div class=\\\"flex mt-2 justify-between px-4 pb-4\\\"><div class=\\\"w-80 flex\\\"><div class=\\\"mr-8\\\"><div class=\\\"bg-primary-1 px-2 rounded-sm w-20 text-center\\\">Product</div></div><div><div class=\\\"bg-primary-1 px-2 rounded-sm w-20 text-center\\\">Details</div></div></div><div class=\\\"w-15\\\"><div class=\\\"bg-primary-1 px-2 rounded-sm w-20 text-center -ml-5\\\">Price</div></div><div class=\\\"w-64\\\"><div class=\\\"bg-primary-1 px-2 rounded-sm w-20 text-center\\\">Delivery</div></div></div>\", 2);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n\n  const _component_Sidebar = _resolveComponent(\"Sidebar\");\n\n  const _component_OrderDetails = _resolveComponent(\"OrderDetails\", true);\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Header \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_Header, {\n    userID: $data.id,\n    class: \"fixed z-10 w-full top-0\"\n  }, null, 8\n  /* PROPS */\n  , [\"userID\"])]), _createCommentVNode(\" Filter \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_Sidebar, {\n    id: \"id\"\n  })])])]), _createCommentVNode(\" Order History \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orderedDetails, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item.id\n    }, [_createVNode(_component_OrderDetails, {\n      orderID: item.orderID,\n      bookName: item.bookName,\n      bookPrice: item.bookPrice,\n      bookImageURL: item.bookImageURL,\n      orderDate: item.orderDate,\n      shipTo: item.shipTo,\n      bookYear: item.bookYear,\n      bookGenre: item.bookGenre,\n      bookAuthor: item.bookAuthor,\n      bookDelivery: item.bookDelivery,\n      addressline1: item.addressline1,\n      addressline2: item.addressline2,\n      city: item.city,\n      landmark: item.landmark,\n      state: item.state,\n      pincode: item.pincode\n    }, null, 8\n    /* PROPS */\n    , [\"orderID\", \"bookName\", \"bookPrice\", \"bookImageURL\", \"orderDate\", \"shipTo\", \"bookYear\", \"bookGenre\", \"bookAuthor\", \"bookDelivery\", \"addressline1\", \"addressline2\", \"city\", \"landmark\", \"state\", \"pincode\"])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])])]);\n}","map":{"version":3,"mappings":";;EA2GSA,KAAK,EAAC;;;EAEFA,KAAK,EAAC;;;EAKNA,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;EAOdA,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;;;;;;;;;;uBAjBnBC,oBA6CM,KA7CN,cA6CM,CA5CFC,+BA4CE,EA3CFC,oBAEM,KAFN,cAEM,CADFC,aAAuDC,iBAAvD,EAAuD;IAA9CC,MAAM,EAAEC,QAAsC;IAAlCP,KAAK,EAAC;EAA4B,CAAvD;;EAAA,aACE,CAFN,CA2CE,EAvCFE,+BAuCE,EAtCFC,oBAMM,KANN,cAMM,CALFA,oBAIM,KAJN,cAIM,CAHFA,oBAEM,KAFN,cAEM,CADFC,aAAkBI,kBAAlB,EAAkB;IAATC,EAAE,EAAC;EAAM,CAAlB,CACE,CAFN,CAGE,CAJN,CAKE,CANN,CAsCE,EA9BFP,sCA8BE,EA7BFC,oBA2BM,KA3BN,cA2BM,CA1BFA,oBAwBM,KAxBN,cAwBM,CAvBFO,UAuBE,qBAHFT,oBAEUU,SAFV,EAEU,IAFV,EAEUC,YAFUL,oBAEV,EAFEM,IAAsB,IAAlB;yBAAhBZ,oBAEU,KAFV,EAEU;MAF2Ba,GAAG,EAAED,IAAI,CAACJ;IAErC,CAFV,GACIL,aAAocW,uBAApc,EAAoc;MAArbC,OAAO,EAAEH,IAAI,CAACG,OAAua;MAA7ZC,QAAQ,EAAEJ,IAAI,CAACI,QAA8Y;MAAnYC,SAAS,EAAEL,IAAI,CAACK,SAAmX;MAAvWC,YAAY,EAAEN,IAAI,CAACM,YAAoV;MAArUC,SAAS,EAAEP,IAAI,CAACO,SAAqT;MAAzSC,MAAM,EAAER,IAAI,CAACQ,MAA4R;MAAnRC,QAAQ,EAAET,IAAI,CAACS,QAAoQ;MAAzPC,SAAS,EAAEV,IAAI,CAACU,SAAyO;MAA7NC,UAAU,EAAEX,IAAI,CAACW,UAA4M;MAA/LC,YAAY,EAAEZ,IAAI,CAACY,YAA4K;MAA7JC,YAAY,EAAEb,IAAI,CAACa,YAA0I;MAA3HC,YAAY,EAAEd,IAAI,CAACc,YAAwG;MAAzFC,IAAI,EAAEf,IAAI,CAACe,IAA8E;MAAvEC,QAAQ,EAAEhB,IAAI,CAACgB,QAAwD;MAA7CC,KAAK,EAAEjB,IAAI,CAACiB,KAAiC;MAAzBC,OAAO,EAAElB,IAAI,CAACkB;IAAW,CAApc;;IAAA,8MADJ;GAEU,CAFV;;EAAA,CAGE,EAxBN,CA0BE,CA3BN,CA6BE,CA7CN","names":["class","_createElementBlock","_createCommentVNode","_createElementVNode","_createVNode","_component_Header","userID","$data","_component_Sidebar","id","_hoisted_8","_Fragment","_renderList","item","key","_component_OrderDetails","orderID","bookName","bookPrice","bookImageURL","orderDate","shipTo","bookYear","bookGenre","bookAuthor","bookDelivery","addressline1","addressline2","city","landmark","state","pincode"],"sourceRoot":"","sources":["W:\\Coding\\finalProject\\e-commerce-website\\src\\views\\OrderDetails\\OrderDetails.vue"],"sourcesContent":["<script>\r\nimport Header from '../../components/Header/Header.vue';\r\nimport Filter from '../../components/Filter/Filter.vue';\r\nimport LatestBooks from '../../components/HomePage/LatestBooks.vue';\r\nimport ResultBook from '../../components/Search/ResultBook.vue';\r\nimport BookCoverCat from '../../components/HomePage/BookCoverCat.vue';\r\nimport Sidebar from '../../components/User/OrderDetailsView/Sidebar.vue';\r\nimport OrderHistory from '../../components/User/OrderHistoryView/OrderHistory.vue';\r\nimport OrderDetails from '../../components/User/OrderDetailsView/OrderDetails.vue';\r\nimport firebase from 'firebase/compat/app'; \r\nexport default{\r\n    data(){\r\n        return{\r\n            orderedDetails: [],\r\n            id: this.$route.query.id,\r\n            isSorted: false,\r\n            tempOrders: new Map(),\r\n            tempOrdersTime: new Set()\r\n        }\r\n    },\r\n    components:{\r\n    Header,\r\n    Filter,\r\n    LatestBooks,\r\n    ResultBook,\r\n    BookCoverCat,\r\n    Sidebar,\r\n    OrderHistory,\r\n    OrderDetails\r\n    },\r\n    async created(){\r\n        let obj = {};\r\n        let bookObj = {};\r\n        var orders = [];\r\n        await firebase.firestore().collection(\"Users\").doc(this.id).get().then((snapshot) => {\r\n            orders = snapshot.data().orders;\r\n            obj['shipTo'] = snapshot.data().name;\r\n            obj['addressline1'] = snapshot.data().addrLine1;\r\n            obj['addressline2'] = snapshot.data().addrLine2;  \r\n            obj['city'] = snapshot.data().city;\r\n            obj['landmark'] = snapshot.data().landmark;\r\n            obj['state'] = snapshot.data().state;\r\n            obj['pincode'] = snapshot.data().zipcode;\r\n\r\n            // console.log(orders)\r\n        })  \r\n\r\n        orders.forEach(async order =>  {\r\n            obj['orderID'] = order;\r\n            await firebase.firestore().collection(\"Orders\").doc(order).get().then(snapshot => {\r\n                //  console.log(snapshot.data())  \r\n                 obj['orderDate'] = snapshot.data().orderDate;\r\n                 var timestamp = snapshot.data().expectedDate;\r\n                 var time = new Date(timestamp.seconds * 1000);\r\n                 var month = time.getMonth() < 10 ? \"0\" + time.getMonth() : time.getMonth();\r\n                 var date = time.getDate() < 10 ? \"0\" + time.getDate() : time.getDate();\r\n                 var year = time.getFullYear();\r\n                 obj['bookDelivery'] = date + \"-\" + month + \"-\" + year;  \r\n                 obj['orderCompleted'] = snapshot.data().orderCompleted;\r\n                 snapshot.data().books.forEach(async book => {\r\n                    // console.log(book);\r\n                    // console.log(obj);\r\n                    await firebase.firestore().collection('books').doc(book).get().then(snapshot => {\r\n                        bookObj['bookName'] = snapshot.data().name;\r\n                        bookObj['bookPrice'] = snapshot.data().price;\r\n                        bookObj['bookImageURL'] = snapshot.data().url;\r\n                        bookObj['bookYear']= snapshot.data().publicationYear;\r\n                        bookObj['bookGenre'] = snapshot.data().genre || \"\";\r\n                        bookObj['bookAuthor'] = snapshot.data().author || \"\";\r\n                    }).finally(() => {\r\n                        bookObj.shipTo = obj.shipTo;\r\n                        bookObj.addressline1 = obj.addressline1 \r\n                        bookObj.addressline2 = obj.addressline2 \r\n                        bookObj.city = obj.city \r\n                        bookObj.state = obj.state \r\n                        bookObj.orderID = obj.orderID \r\n                        bookObj.pincode = obj.pincode\r\n                        bookObj.orderDate = obj.orderDate\r\n                        bookObj.bookDelivery = obj.bookDelivery\r\n                        this.orderedDetails.push(bookObj);\r\n                        console.log(bookObj)\r\n                        // this.tempOrders.add(bookObj);\r\n                        bookObj = {};\r\n                    })\r\n                 })             \r\n            })\r\n            this.sort();\r\n        });\r\n\r\n    },\r\n    methods: {\r\n        sort(){\r\n            if(this.isSorted === false){\r\n                this.isSorted = true;\r\n                console.log(\"Inside sort\");\r\n                var tempArr = [];\r\n                console.log(this.orderedDetails )\r\n                this.orderedDetails.forEach(order => {\r\n                console.log(order);\r\n            })\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div class=\"relative\" >\r\n        <!-- Header -->\r\n        <div class=\"\">\r\n            <Header :userID=\"id\" class=\"fixed z-10 w-full top-0\" />\r\n        </div>\r\n        \r\n        <!-- Filter -->\r\n        <div class=\"absoulute\">\r\n            <div class=\"\">              \r\n                <div class=\"fixed w-full\">\r\n                    <Sidebar id=\"id\"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Order History -->\r\n        <div class=\"mt-20 absolute top-6 left-96\">\r\n            <div class=\"w-240\">\r\n                <div class=\"text-3xl font-bold text-gray-700\">ORDER DETAILS</div>\r\n                <div class=\"flex mt-2 justify-between px-4 pb-4\">\r\n                    <div class=\"w-80 flex\">\r\n                        <div class=\"mr-8\">\r\n                            <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center\" >Product</div>\r\n                        </div>\r\n                        <div>\r\n                            <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center\" >Details</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-15\">\r\n                        <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center -ml-5\" >Price</div>\r\n                    </div>\r\n                    <div class=\"w-64\">\r\n                        <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center\" >Delivery</div>\r\n                    </div>\r\n                    \r\n                    \r\n                    \r\n                </div>\r\n                <div v-for=\"item in orderedDetails\" :key=\"item.id\">\r\n                    <OrderDetails :orderID=\"item.orderID\" :bookName=\"item.bookName\" :bookPrice=\"item.bookPrice\" :bookImageURL=\"item.bookImageURL\" :orderDate=\"item.orderDate\" :shipTo=\"item.shipTo\" :bookYear=\"item.bookYear\" :bookGenre=\"item.bookGenre\" :bookAuthor=\"item.bookAuthor\" :bookDelivery=\"item.bookDelivery\" :addressline1=\"item.addressline1\" :addressline2=\"item.addressline2\" :city=\"item.city\" :landmark=\"item.landmark\" :state=\"item.state\" :pincode=\"item.pincode\" />\r\n                    </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n    \r\n        \r\n</template>\r\n\r\n<style>\r\n</style>\r\n\r\n                    <!-- <ResultBook :bookName=\"item.bookName\" :bookDate=\"item.bookDate\" :bookLanguage=\"item.bookLanguage\" :bookCover=\"item.bookCover\" :bookPrice=\"item.bookPrice\" :bookImageURL=\"item.bookImageURL\"/> -->"]},"metadata":{},"sourceType":"module"}