{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport Header from '../../components/Header/Header.vue';\nimport Filter from '../../components/Filter/Filter.vue';\nimport LatestBooks from '../../components/HomePage/LatestBooks.vue';\nimport ResultBook from '../../components/Search/ResultBook.vue';\nimport BookCoverCat from '../../components/HomePage/BookCoverCat.vue';\nimport OrderHistory from '../../components/User/OrderHistoryView/OrderHistory.vue';\nimport OrderDetails from '../../components/User/OrderDetailsView/OrderDetails.vue';\nimport WishBooks from '../../components/WishList/WishBooks.vue';\nimport firebase from 'firebase/compat/app';\nexport default {\n  data() {\n    return {\n      wishlistBooks: [{\n        bookName: \"Gitanjali\",\n        bookPrice: \"1300\",\n        bookImageURL: \"https://picsum.photos/200/300\",\n        bookYear: \"1910\",\n        bookGenre: \"Poem\",\n        bookAuthor: \"Rabindranath Tagore\"\n      }, {\n        bookName: \"Ikigai\",\n        bookPrice: \"520\",\n        bookImageURL: \"https://picsum.photos/200/300\",\n        bookYear: \"2001\",\n        bookGenre: \"Self-Help\",\n        bookAuthor: \"Priyanshu Lapkale\"\n      }, {\n        bookName: \"A Thousand Splendid Suns\",\n        bookPrice: \"320\",\n        bookImageURL: \"https://picsum.photos/200/300\",\n        bookYear: \"1920\",\n        bookGenre: \"Thrill\",\n        bookAuthor: \"Khaled Houssein\"\n      }],\n      id: this.$route.query.id,\n      books: []\n    };\n  },\n\n  created() {\n    this.fetch();\n  },\n\n  components: {\n    Header,\n    Filter,\n    LatestBooks,\n    ResultBook,\n    BookCoverCat,\n    // Sidebar,\n    OrderHistory,\n    OrderDetails,\n    WishBooks\n  },\n  methods: {\n    fetch() {\n      const db = firebase.firestore();\n      console.log(\"Inside created() method of Wishlist\");\n\n      try {\n        this.books = [];\n        console.log(\"User ID : \" + this.id);\n        db.collection('Users').doc(this.id).get().then(r => {\n          console.log(r.data());\n          var arr = r.data().wishList;\n          console.log(arr);\n\n          for (let i = 0; i < arr.length; i++) {\n            db.collection('books').doc(arr[i]).get().then(book => {\n              // book.data().id = arr[i];\n              // console.log(book.data())\n              this.books.push(book.data()); //adding the book id to books array of objects\n\n              this.books[i].id = arr[i];\n            });\n          }\n\n          console.log('Wishlist books array');\n          console.log(this.books);\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    updateWishList(updatedWishList) {\n      var tempBooks = [];\n      console.log(updatedWishList);\n      this.books.forEach(book => {\n        console.log(book.id);\n        if (updatedWishList.includes(book.id)) tempBooks.push(book);\n      });\n      this.books = tempBooks;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["Header","Filter","LatestBooks","ResultBook","BookCoverCat","OrderHistory","OrderDetails","WishBooks","firebase","data","wishlistBooks","bookName","bookPrice","bookImageURL","bookYear","bookGenre","bookAuthor","id","$route","query","books","created","fetch","components","methods","db","firestore","console","log","collection","doc","get","then","r","arr","wishList","i","length","book","push","e","updateWishList","updatedWishList","tempBooks","forEach","includes"],"sourceRoot":"","sources":["W:\\Coding\\finalProject\\e-commerce-website\\src\\views\\WishList\\WishList.vue"],"sourcesContent":["<script>\r\nimport Header from '../../components/Header/Header.vue';\r\nimport Filter from '../../components/Filter/Filter.vue';\r\nimport LatestBooks from '../../components/HomePage/LatestBooks.vue';\r\nimport ResultBook from '../../components/Search/ResultBook.vue';\r\nimport BookCoverCat from '../../components/HomePage/BookCoverCat.vue';\r\nimport OrderHistory from '../../components/User/OrderHistoryView/OrderHistory.vue';\r\nimport OrderDetails from '../../components/User/OrderDetailsView/OrderDetails.vue';\r\nimport WishBooks from '../../components/WishList/WishBooks.vue';\r\nimport firebase from 'firebase/compat/app';\r\nexport default{\r\n    data(){\r\n        return{\r\n            wishlistBooks:[\r\n                {   \r\n                    bookName:\"Gitanjali\",\r\n                    bookPrice:\"1300\",\r\n                    bookImageURL:\"https://picsum.photos/200/300\",\r\n                    bookYear: \"1910\",\r\n                    bookGenre: \"Poem\",\r\n                    bookAuthor:\"Rabindranath Tagore\",\r\n                },\r\n                {   \r\n                    bookName:\"Ikigai\",\r\n                    bookPrice:\"520\",\r\n                    bookImageURL:\"https://picsum.photos/200/300\",\r\n                    bookYear: \"2001\",\r\n                    bookGenre: \"Self-Help\",\r\n                    bookAuthor:\"Priyanshu Lapkale\",\r\n                },{   \r\n                    bookName:\"A Thousand Splendid Suns\",\r\n                    bookPrice:\"320\",\r\n                    bookImageURL:\"https://picsum.photos/200/300\",\r\n                    bookYear: \"1920\",\r\n                    bookGenre: \"Thrill\",\r\n                    bookAuthor:\"Khaled Houssein\",\r\n                },\r\n            ],\r\n            id: this.$route.query.id,\r\n            books: []\r\n        }\r\n    },\r\n    created(){\r\n          this.fetch()\r\n    },\r\n    components:{\r\n    Header,\r\n    Filter,\r\n    LatestBooks,\r\n    ResultBook,\r\n    BookCoverCat,\r\n    // Sidebar,\r\n    OrderHistory,\r\n    OrderDetails,\r\n    WishBooks\r\n},\r\nmethods: {\r\n    fetch(){\r\n        const db = firebase.firestore(); \r\n        console.log(\"Inside created() method of Wishlist\")\r\n        try{\r\n            this.books = []\r\n            console.log(\"User ID : \" + this.id)\r\n          db.collection('Users').doc(this.id).get().then((r) => {\r\n            console.log(r.data());\r\n            var arr = r.data().wishList;\r\n            console.log(arr);\r\n            for(let i = 0; i < arr.length; i++){\r\n              db.collection('books').doc(arr[i]).get().then((book) => {\r\n                // book.data().id = arr[i];\r\n                // console.log(book.data())\r\n\r\n                this.books.push(book.data())\r\n                //adding the book id to books array of objects\r\n                this.books[i].id = arr[i];\r\n                \r\n              })\r\n            }\r\n            console.log('Wishlist books array')\r\n              console.log(this.books)\r\n          }); \r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n    },\r\n    updateWishList(updatedWishList){\r\n        var tempBooks = [];\r\n        console.log(updatedWishList);\r\n        this.books.forEach(book => {\r\n            console.log(book.id);\r\n            if(updatedWishList.includes(book.id))\r\n                tempBooks.push(book);\r\n        });\r\n        this.books = tempBooks;\r\n    }\r\n}\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div class=\"relative\" >\r\n        <!-- Header -->\r\n        <div class=\"\">\r\n            <Header :userID=\"id\" class=\"fixed z-10 w-full top-0\" />\r\n        </div>\r\n        \r\n        <!-- WishList -->\r\n        <div class=\"mt-24 mx-40\">\r\n            <div class=\"text-3xl font-semibold text-gray-700 mb-5\">Your WishList</div>\r\n            \r\n            \r\n            <div v-if=\"books.length === 0\" style=\"text-align:center;margin-bottom: 20vh;\">\r\n                <img src=\"../../assets/empty-box.png\" alt=\"\" style=\"height: 40vw; margin: auto; background-color: red;\" >\r\n                <div style=\"position: relative; bottom: 10vh; font-size: 64px;\">Your Wishlist is empty :(</div>\r\n            </div>\r\n            <div v-else>\r\n                <div v-for=\"item in books\" :key=\"item.id\">\r\n                     \r\n                     <div>\r\n                     <!-- <router-link to=\"/book\" > -->\r\n                         <WishBooks @updateWishList=\"updateWishList\" :bookName=\"item.name\" :bookPrice=\"item.price\" :bookImageURL=\"item.url\" :bookYear=\"item.publicationYear\" :bookGenre=\"item.bookGenre\" :bookAuthor=\"item.author\" :bookID=\"item.id\" :id=\"id\"/>\r\n                     <!-- </router-link> -->\r\n                    </div>\r\n                                         \r\n                 </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n    </div>\r\n    \r\n        \r\n</template>\r\n\r\n<style>\r\n</style>"]},"metadata":{},"sourceType":"module"}