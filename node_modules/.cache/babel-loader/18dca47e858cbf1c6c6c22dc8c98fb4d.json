{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nconst path = require(\"path\");\n\nconst os = require(\"os\");\n\nconst {\n  SourceMapConsumer\n} = require(\"source-map\");\n\nconst {\n  validate\n} = require(\"schema-utils\");\n\nconst serialize = require(\"serialize-javascript\");\n\nconst {\n  Worker\n} = require(\"jest-worker\");\n\nconst {\n  throttleAll,\n  terserMinify,\n  uglifyJsMinify,\n  swcMinify,\n  esbuildMinify\n} = require(\"./utils\");\n\nconst schema = require(\"./options.json\");\n\nconst {\n  minify\n} = require(\"./minify\");\n/** @typedef {import(\"schema-utils/declarations/validate\").Schema} Schema */\n\n/** @typedef {import(\"webpack\").Compiler} Compiler */\n\n/** @typedef {import(\"webpack\").Compilation} Compilation */\n\n/** @typedef {import(\"webpack\").WebpackError} WebpackError */\n\n/** @typedef {import(\"webpack\").Asset} Asset */\n\n/** @typedef {import(\"./utils.js\").TerserECMA} TerserECMA */\n\n/** @typedef {import(\"./utils.js\").TerserOptions} TerserOptions */\n\n/** @typedef {import(\"jest-worker\").Worker} JestWorker */\n\n/** @typedef {import(\"source-map\").RawSourceMap} RawSourceMap */\n\n/** @typedef {RegExp | string} Rule */\n\n/** @typedef {Rule[] | Rule} Rules */\n\n/**\r\n * @callback ExtractCommentsFunction\r\n * @param {any} astNode\r\n * @param {{ value: string, type: 'comment1' | 'comment2' | 'comment3' | 'comment4', pos: number, line: number, col: number }} comment\r\n * @returns {boolean}\r\n */\n\n/**\r\n * @typedef {boolean | 'all' | 'some' | RegExp | ExtractCommentsFunction} ExtractCommentsCondition\r\n */\n\n/**\r\n * @typedef {string | ((fileData: any) => string)} ExtractCommentsFilename\r\n */\n\n/**\r\n * @typedef {boolean | string | ((commentsFile: string) => string)} ExtractCommentsBanner\r\n */\n\n/**\r\n * @typedef {Object} ExtractCommentsObject\r\n * @property {ExtractCommentsCondition} [condition]\r\n * @property {ExtractCommentsFilename} [filename]\r\n * @property {ExtractCommentsBanner} [banner]\r\n */\n\n/**\r\n * @typedef {ExtractCommentsCondition | ExtractCommentsObject} ExtractCommentsOptions\r\n */\n\n/**\r\n * @typedef {Object} MinimizedResult\r\n * @property {string} code\r\n * @property {RawSourceMap} [map]\r\n * @property {Array<Error | string>} [errors]\r\n * @property {Array<Error | string>} [warnings]\r\n * @property {Array<string>} [extractedComments]\r\n */\n\n/**\r\n * @typedef {{ [file: string]: string }} Input\r\n */\n\n/**\r\n * @typedef {{ [key: string]: any }} CustomOptions\r\n */\n\n/**\r\n * @template T\r\n * @typedef {T extends infer U ? U : CustomOptions} InferDefaultType\r\n */\n\n/**\r\n * @typedef {Object} PredefinedOptions\r\n * @property {boolean} [module]\r\n * @property {TerserECMA} [ecma]\r\n */\n\n/**\r\n * @template T\r\n * @typedef {PredefinedOptions & InferDefaultType<T>} MinimizerOptions\r\n */\n\n/**\r\n * @template T\r\n * @callback BasicMinimizerImplementation\r\n * @param {Input} input\r\n * @param {RawSourceMap | undefined} sourceMap\r\n * @param {MinimizerOptions<T>} minifyOptions\r\n * @param {ExtractCommentsOptions | undefined} extractComments\r\n * @returns {Promise<MinimizedResult>}\r\n */\n\n/**\r\n * @typedef {object} MinimizeFunctionHelpers\r\n * @property {() => string | undefined} [getMinimizerVersion]\r\n */\n\n/**\r\n * @template T\r\n * @typedef {BasicMinimizerImplementation<T> & MinimizeFunctionHelpers} MinimizerImplementation\r\n */\n\n/**\r\n * @template T\r\n * @typedef {Object} InternalOptions\r\n * @property {string} name\r\n * @property {string} input\r\n * @property {RawSourceMap | undefined} inputSourceMap\r\n * @property {ExtractCommentsOptions | undefined} extractComments\r\n * @property {{ implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> }} minimizer\r\n */\n\n/**\r\n * @template T\r\n * @typedef {JestWorker & { transform: (options: string) => MinimizedResult, minify: (options: InternalOptions<T>) => MinimizedResult }} MinimizerWorker\r\n */\n\n/**\r\n * @typedef {undefined | boolean | number} Parallel\r\n */\n\n/**\r\n * @typedef {Object} BasePluginOptions\r\n * @property {Rules} [test]\r\n * @property {Rules} [include]\r\n * @property {Rules} [exclude]\r\n * @property {ExtractCommentsOptions} [extractComments]\r\n * @property {Parallel} [parallel]\r\n */\n\n/**\r\n * @template T\r\n * @typedef {T extends TerserOptions ? { minify?: MinimizerImplementation<T> | undefined, terserOptions?: MinimizerOptions<T> | undefined } : { minify: MinimizerImplementation<T>, terserOptions?: MinimizerOptions<T> | undefined }} DefinedDefaultMinimizerAndOptions\r\n */\n\n/**\r\n * @template T\r\n * @typedef {BasePluginOptions & { minimizer: { implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> } }} InternalPluginOptions\r\n */\n\n/**\r\n * @template [T=TerserOptions]\r\n */\n\n\nclass TerserPlugin {\n  /**\r\n   * @param {BasePluginOptions & DefinedDefaultMinimizerAndOptions<T>} [options]\r\n   */\n  constructor(options) {\n    validate(\n    /** @type {Schema} */\n    schema, options || {}, {\n      name: \"Terser Plugin\",\n      baseDataPath: \"options\"\n    }); // TODO make `minimizer` option instead `minify` and `terserOptions` in the next major release, also rename `terserMinify` to `terserMinimize`\n\n    const {\n      minify =\n      /** @type {MinimizerImplementation<T>} */\n      terserMinify,\n      terserOptions =\n      /** @type {MinimizerOptions<T>} */\n      {},\n      test = /\\.[cm]?js(\\?.*)?$/i,\n      extractComments = true,\n      parallel = true,\n      include,\n      exclude\n    } = options || {};\n    /**\r\n     * @private\r\n     * @type {InternalPluginOptions<T>}\r\n     */\n\n    this.options = {\n      test,\n      extractComments,\n      parallel,\n      include,\n      exclude,\n      minimizer: {\n        implementation: minify,\n        options: terserOptions\n      }\n    };\n  }\n  /**\r\n   * @private\r\n   * @param {any} input\r\n   * @returns {boolean}\r\n   */\n\n\n  static isSourceMap(input) {\n    // All required options for `new SourceMapConsumer(...options)`\n    // https://github.com/mozilla/source-map#new-sourcemapconsumerrawsourcemap\n    return Boolean(input && input.version && input.sources && Array.isArray(input.sources) && typeof input.mappings === \"string\");\n  }\n  /**\r\n   * @private\r\n   * @param {unknown} warning\r\n   * @param {string} file\r\n   * @returns {Error}\r\n   */\n\n\n  static buildWarning(warning, file) {\n    /**\r\n     * @type {Error & { hideStack: true, file: string }}\r\n     */\n    // @ts-ignore\n    const builtWarning = new Error(warning.toString());\n    builtWarning.name = \"Warning\";\n    builtWarning.hideStack = true;\n    builtWarning.file = file;\n    return builtWarning;\n  }\n  /**\r\n   * @private\r\n   * @param {any} error\r\n   * @param {string} file\r\n   * @param {SourceMapConsumer} [sourceMap]\r\n   * @param {Compilation[\"requestShortener\"]} [requestShortener]\r\n   * @returns {Error}\r\n   */\n\n\n  static buildError(error, file, sourceMap, requestShortener) {\n    /**\r\n     * @type {Error & { file?: string }}\r\n     */\n    let builtError;\n\n    if (typeof error === \"string\") {\n      builtError = new Error(`${file} from Terser plugin\\n${error}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    if (error.line) {\n      const original = sourceMap && sourceMap.originalPositionFor({\n        line: error.line,\n        column: error.col\n      });\n\n      if (original && original.source && requestShortener) {\n        builtError = new Error(`${file} from Terser plugin\\n${error.message} [${requestShortener.shorten(original.source)}:${original.line},${original.column}][${file}:${error.line},${error.col}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\n        builtError.file = file;\n        return builtError;\n      }\n\n      builtError = new Error(`${file} from Terser plugin\\n${error.message} [${file}:${error.line},${error.col}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    if (error.stack) {\n      builtError = new Error(`${file} from Terser plugin\\n${typeof error.message !== \"undefined\" ? error.message : \"\"}\\n${error.stack}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    builtError = new Error(`${file} from Terser plugin\\n${error.message}`);\n    builtError.file = file;\n    return builtError;\n  }\n  /**\r\n   * @private\r\n   * @param {Parallel} parallel\r\n   * @returns {number}\r\n   */\n\n\n  static getAvailableNumberOfCores(parallel) {\n    // In some cases cpus() returns undefined\n    // https://github.com/nodejs/node/issues/19022\n    const cpus = os.cpus() || {\n      length: 1\n    };\n    return parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\n  }\n  /**\r\n   * @private\r\n   * @param {Compiler} compiler\r\n   * @param {Compilation} compilation\r\n   * @param {Record<string, import(\"webpack\").sources.Source>} assets\r\n   * @param {{availableNumberOfCores: number}} optimizeOptions\r\n   * @returns {Promise<void>}\r\n   */\n\n\n  async optimize(compiler, compilation, assets, optimizeOptions) {\n    const cache = compilation.getCache(\"TerserWebpackPlugin\");\n    let numberOfAssets = 0;\n    const assetsForMinify = await Promise.all(Object.keys(assets).filter(name => {\n      const {\n        info\n      } =\n      /** @type {Asset} */\n      compilation.getAsset(name);\n\n      if ( // Skip double minimize assets from child compilation\n      info.minimized || // Skip minimizing for extracted comments assets\n      info.extractedComments) {\n        return false;\n      }\n\n      if (!compiler.webpack.ModuleFilenameHelpers.matchObject.bind( // eslint-disable-next-line no-undefined\n      undefined, this.options)(name)) {\n        return false;\n      }\n\n      return true;\n    }).map(async name => {\n      const {\n        info,\n        source\n      } =\n      /** @type {Asset} */\n      compilation.getAsset(name);\n      const eTag = cache.getLazyHashedEtag(source);\n      const cacheItem = cache.getItemCache(name, eTag);\n      const output = await cacheItem.getPromise();\n\n      if (!output) {\n        numberOfAssets += 1;\n      }\n\n      return {\n        name,\n        info,\n        inputSource: source,\n        output,\n        cacheItem\n      };\n    }));\n\n    if (assetsForMinify.length === 0) {\n      return;\n    }\n    /** @type {undefined | (() => MinimizerWorker<T>)} */\n\n\n    let getWorker;\n    /** @type {undefined | MinimizerWorker<T>} */\n\n    let initializedWorker;\n    /** @type {undefined | number} */\n\n    let numberOfWorkers;\n\n    if (optimizeOptions.availableNumberOfCores > 0) {\n      // Do not create unnecessary workers when the number of files is less than the available cores, it saves memory\n      numberOfWorkers = Math.min(numberOfAssets, optimizeOptions.availableNumberOfCores); // eslint-disable-next-line consistent-return\n\n      getWorker = () => {\n        if (initializedWorker) {\n          return initializedWorker;\n        }\n\n        initializedWorker =\n        /** @type {MinimizerWorker<T>} */\n        new Worker(require.resolve(\"./minify\"), {\n          numWorkers: numberOfWorkers,\n          enableWorkerThreads: true\n        }); // https://github.com/facebook/jest/issues/8872#issuecomment-524822081\n\n        const workerStdout = initializedWorker.getStdout();\n\n        if (workerStdout) {\n          workerStdout.on(\"data\", chunk => process.stdout.write(chunk));\n        }\n\n        const workerStderr = initializedWorker.getStderr();\n\n        if (workerStderr) {\n          workerStderr.on(\"data\", chunk => process.stderr.write(chunk));\n        }\n\n        return initializedWorker;\n      };\n    }\n\n    const {\n      SourceMapSource,\n      ConcatSource,\n      RawSource\n    } = compiler.webpack.sources;\n    /** @typedef {{ extractedCommentsSource : import(\"webpack\").sources.RawSource, commentsFilename: string }} ExtractedCommentsInfo */\n\n    /** @type {Map<string, ExtractedCommentsInfo>} */\n\n    const allExtractedComments = new Map();\n    const scheduledTasks = [];\n\n    for (const asset of assetsForMinify) {\n      scheduledTasks.push(async () => {\n        const {\n          name,\n          inputSource,\n          info,\n          cacheItem\n        } = asset;\n        let {\n          output\n        } = asset;\n\n        if (!output) {\n          let input;\n          /** @type {RawSourceMap | undefined} */\n\n          let inputSourceMap;\n          const {\n            source: sourceFromInputSource,\n            map\n          } = inputSource.sourceAndMap();\n          input = sourceFromInputSource;\n\n          if (map) {\n            if (!TerserPlugin.isSourceMap(map)) {\n              compilation.warnings.push(\n              /** @type {WebpackError} */\n              new Error(`${name} contains invalid source map`));\n            } else {\n              inputSourceMap =\n              /** @type {RawSourceMap} */\n              map;\n            }\n          }\n\n          if (Buffer.isBuffer(input)) {\n            input = input.toString();\n          }\n          /**\r\n           * @type {InternalOptions<T>}\r\n           */\n\n\n          const options = {\n            name,\n            input,\n            inputSourceMap,\n            minimizer: {\n              implementation: this.options.minimizer.implementation,\n              // @ts-ignore https://github.com/Microsoft/TypeScript/issues/10727\n              options: { ...this.options.minimizer.options\n              }\n            },\n            extractComments: this.options.extractComments\n          };\n\n          if (typeof options.minimizer.options.module === \"undefined\") {\n            if (typeof info.javascriptModule !== \"undefined\") {\n              options.minimizer.options.module = info.javascriptModule;\n            } else if (/\\.mjs(\\?.*)?$/i.test(name)) {\n              options.minimizer.options.module = true;\n            } else if (/\\.cjs(\\?.*)?$/i.test(name)) {\n              options.minimizer.options.module = false;\n            }\n          }\n\n          if (typeof options.minimizer.options.ecma === \"undefined\") {\n            options.minimizer.options.ecma = TerserPlugin.getEcmaVersion(compiler.options.output.environment || {});\n          }\n\n          try {\n            output = await (getWorker ? getWorker().transform(serialize(options)) : minify(options));\n          } catch (error) {\n            const hasSourceMap = inputSourceMap && TerserPlugin.isSourceMap(inputSourceMap);\n            compilation.errors.push(\n            /** @type {WebpackError} */\n            TerserPlugin.buildError(error, name, hasSourceMap ? new SourceMapConsumer(\n            /** @type {RawSourceMap} */\n            inputSourceMap) : // eslint-disable-next-line no-undefined\n            undefined, // eslint-disable-next-line no-undefined\n            hasSourceMap ? compilation.requestShortener : undefined));\n            return;\n          }\n\n          if (typeof output.code === \"undefined\") {\n            compilation.errors.push(\n            /** @type {WebpackError} */\n            new Error(`${name} from Terser plugin\\nMinimizer doesn't return result`));\n            return;\n          }\n\n          if (output.warnings && output.warnings.length > 0) {\n            output.warnings = output.warnings.map(\n            /**\r\n             * @param {Error | string} item\r\n             */\n            item => TerserPlugin.buildWarning(item, name));\n          }\n\n          if (output.errors && output.errors.length > 0) {\n            const hasSourceMap = inputSourceMap && TerserPlugin.isSourceMap(inputSourceMap);\n            output.errors = output.errors.map(\n            /**\r\n             * @param {Error | string} item\r\n             */\n            item => TerserPlugin.buildError(item, name, hasSourceMap ? new SourceMapConsumer(\n            /** @type {RawSourceMap} */\n            inputSourceMap) : // eslint-disable-next-line no-undefined\n            undefined, // eslint-disable-next-line no-undefined\n            hasSourceMap ? compilation.requestShortener : undefined));\n          }\n\n          let shebang;\n\n          if (\n          /** @type {ExtractCommentsObject} */\n          this.options.extractComments.banner !== false && output.extractedComments && output.extractedComments.length > 0 && output.code.startsWith(\"#!\")) {\n            const firstNewlinePosition = output.code.indexOf(\"\\n\");\n            shebang = output.code.substring(0, firstNewlinePosition);\n            output.code = output.code.substring(firstNewlinePosition + 1);\n          }\n\n          if (output.map) {\n            output.source = new SourceMapSource(output.code, name, output.map, input,\n            /** @type {RawSourceMap} */\n            inputSourceMap, true);\n          } else {\n            output.source = new RawSource(output.code);\n          }\n\n          if (output.extractedComments && output.extractedComments.length > 0) {\n            const commentsFilename =\n            /** @type {ExtractCommentsObject} */\n            this.options.extractComments.filename || \"[file].LICENSE.txt[query]\";\n            let query = \"\";\n            let filename = name;\n            const querySplit = filename.indexOf(\"?\");\n\n            if (querySplit >= 0) {\n              query = filename.substr(querySplit);\n              filename = filename.substr(0, querySplit);\n            }\n\n            const lastSlashIndex = filename.lastIndexOf(\"/\");\n            const basename = lastSlashIndex === -1 ? filename : filename.substr(lastSlashIndex + 1);\n            const data = {\n              filename,\n              basename,\n              query\n            };\n            output.commentsFilename = compilation.getPath(commentsFilename, data);\n            let banner; // Add a banner to the original file\n\n            if (\n            /** @type {ExtractCommentsObject} */\n            this.options.extractComments.banner !== false) {\n              banner =\n              /** @type {ExtractCommentsObject} */\n              this.options.extractComments.banner || `For license information please see ${path.relative(path.dirname(name), output.commentsFilename).replace(/\\\\/g, \"/\")}`;\n\n              if (typeof banner === \"function\") {\n                banner = banner(output.commentsFilename);\n              }\n\n              if (banner) {\n                output.source = new ConcatSource(shebang ? `${shebang}\\n` : \"\", `/*! ${banner} */\\n`, output.source);\n              }\n            }\n\n            const extractedCommentsString = output.extractedComments.sort().join(\"\\n\\n\");\n            output.extractedCommentsSource = new RawSource(`${extractedCommentsString}\\n`);\n          }\n\n          await cacheItem.storePromise({\n            source: output.source,\n            errors: output.errors,\n            warnings: output.warnings,\n            commentsFilename: output.commentsFilename,\n            extractedCommentsSource: output.extractedCommentsSource\n          });\n        }\n\n        if (output.warnings && output.warnings.length > 0) {\n          for (const warning of output.warnings) {\n            compilation.warnings.push(\n            /** @type {WebpackError} */\n            warning);\n          }\n        }\n\n        if (output.errors && output.errors.length > 0) {\n          for (const error of output.errors) {\n            compilation.errors.push(\n            /** @type {WebpackError} */\n            error);\n          }\n        }\n        /** @type {Record<string, any>} */\n\n\n        const newInfo = {\n          minimized: true\n        };\n        const {\n          source,\n          extractedCommentsSource\n        } = output; // Write extracted comments to commentsFilename\n\n        if (extractedCommentsSource) {\n          const {\n            commentsFilename\n          } = output;\n          newInfo.related = {\n            license: commentsFilename\n          };\n          allExtractedComments.set(name, {\n            extractedCommentsSource,\n            commentsFilename\n          });\n        }\n\n        compilation.updateAsset(name, source, newInfo);\n      });\n    }\n\n    const limit = getWorker && numberOfAssets > 0 ?\n    /** @type {number} */\n    numberOfWorkers : scheduledTasks.length;\n    await throttleAll(limit, scheduledTasks);\n\n    if (initializedWorker) {\n      await initializedWorker.end();\n    }\n    /** @typedef {{ source: import(\"webpack\").sources.Source, commentsFilename: string, from: string }} ExtractedCommentsInfoWIthFrom */\n\n\n    await Array.from(allExtractedComments).sort().reduce(\n    /**\r\n     * @param {Promise<unknown>} previousPromise\r\n     * @param {[string, ExtractedCommentsInfo]} extractedComments\r\n     * @returns {Promise<ExtractedCommentsInfoWIthFrom>}\r\n     */\n    async (previousPromise, [from, value]) => {\n      const previous =\n      /** @type {ExtractedCommentsInfoWIthFrom | undefined} **/\n      await previousPromise;\n      const {\n        commentsFilename,\n        extractedCommentsSource\n      } = value;\n\n      if (previous && previous.commentsFilename === commentsFilename) {\n        const {\n          from: previousFrom,\n          source: prevSource\n        } = previous;\n        const mergedName = `${previousFrom}|${from}`;\n        const name = `${commentsFilename}|${mergedName}`;\n        const eTag = [prevSource, extractedCommentsSource].map(item => cache.getLazyHashedEtag(item)).reduce((previousValue, currentValue) => cache.mergeEtags(previousValue, currentValue));\n        let source = await cache.getPromise(name, eTag);\n\n        if (!source) {\n          source = new ConcatSource(Array.from(new Set([...\n          /** @type {string}*/\n          prevSource.source().split(\"\\n\\n\"), ...\n          /** @type {string}*/\n          extractedCommentsSource.source().split(\"\\n\\n\")])).join(\"\\n\\n\"));\n          await cache.storePromise(name, eTag, source);\n        }\n\n        compilation.updateAsset(commentsFilename, source);\n        return {\n          source,\n          commentsFilename,\n          from: mergedName\n        };\n      }\n\n      const existingAsset = compilation.getAsset(commentsFilename);\n\n      if (existingAsset) {\n        return {\n          source: existingAsset.source,\n          commentsFilename,\n          from: commentsFilename\n        };\n      }\n\n      compilation.emitAsset(commentsFilename, extractedCommentsSource, {\n        extractedComments: true\n      });\n      return {\n        source: extractedCommentsSource,\n        commentsFilename,\n        from\n      };\n    },\n    /** @type {Promise<unknown>} */\n    Promise.resolve());\n  }\n  /**\r\n   * @private\r\n   * @param {any} environment\r\n   * @returns {TerserECMA}\r\n   */\n\n\n  static getEcmaVersion(environment) {\n    // ES 6th\n    if (environment.arrowFunction || environment.const || environment.destructuring || environment.forOf || environment.module) {\n      return 2015;\n    } // ES 11th\n\n\n    if (environment.bigIntLiteral || environment.dynamicImport) {\n      return 2020;\n    }\n\n    return 5;\n  }\n  /**\r\n   * @param {Compiler} compiler\r\n   * @returns {void}\r\n   */\n\n\n  apply(compiler) {\n    const pluginName = this.constructor.name;\n    const availableNumberOfCores = TerserPlugin.getAvailableNumberOfCores(this.options.parallel);\n    compiler.hooks.compilation.tap(pluginName, compilation => {\n      const hooks = compiler.webpack.javascript.JavascriptModulesPlugin.getCompilationHooks(compilation);\n      const data = serialize({\n        minimizer: typeof this.options.minimizer.implementation.getMinimizerVersion !== \"undefined\" ? this.options.minimizer.implementation.getMinimizerVersion() || \"0.0.0\" : \"0.0.0\",\n        options: this.options.minimizer.options\n      });\n      hooks.chunkHash.tap(pluginName, (chunk, hash) => {\n        hash.update(\"TerserPlugin\");\n        hash.update(data);\n      });\n      compilation.hooks.processAssets.tapPromise({\n        name: pluginName,\n        stage: compiler.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE,\n        additionalAssets: true\n      }, assets => this.optimize(compiler, compilation, assets, {\n        availableNumberOfCores\n      }));\n      compilation.hooks.statsPrinter.tap(pluginName, stats => {\n        stats.hooks.print.for(\"asset.info.minimized\").tap(\"terser-webpack-plugin\", (minimized, {\n          green,\n          formatFlag\n        }) => minimized ?\n        /** @type {Function} */\n        green(\n        /** @type {Function} */\n        formatFlag(\"minimized\")) : \"\");\n      });\n    });\n  }\n\n}\n\nTerserPlugin.terserMinify = terserMinify;\nTerserPlugin.uglifyJsMinify = uglifyJsMinify;\nTerserPlugin.swcMinify = swcMinify;\nTerserPlugin.esbuildMinify = esbuildMinify;\nmodule.exports = TerserPlugin;","map":{"version":3,"names":["path","require","os","SourceMapConsumer","validate","serialize","Worker","throttleAll","terserMinify","uglifyJsMinify","swcMinify","esbuildMinify","schema","minify","TerserPlugin","constructor","options","name","baseDataPath","terserOptions","test","extractComments","parallel","include","exclude","minimizer","implementation","isSourceMap","input","Boolean","version","sources","Array","isArray","mappings","buildWarning","warning","file","builtWarning","Error","toString","hideStack","buildError","error","sourceMap","requestShortener","builtError","line","original","originalPositionFor","column","col","source","message","shorten","stack","split","slice","join","getAvailableNumberOfCores","cpus","length","Math","min","Number","optimize","compiler","compilation","assets","optimizeOptions","cache","getCache","numberOfAssets","assetsForMinify","Promise","all","Object","keys","filter","info","getAsset","minimized","extractedComments","webpack","ModuleFilenameHelpers","matchObject","bind","undefined","map","eTag","getLazyHashedEtag","cacheItem","getItemCache","output","getPromise","inputSource","getWorker","initializedWorker","numberOfWorkers","availableNumberOfCores","resolve","numWorkers","enableWorkerThreads","workerStdout","getStdout","on","chunk","process","stdout","write","workerStderr","getStderr","stderr","SourceMapSource","ConcatSource","RawSource","allExtractedComments","Map","scheduledTasks","asset","push","inputSourceMap","sourceFromInputSource","sourceAndMap","warnings","Buffer","isBuffer","module","javascriptModule","ecma","getEcmaVersion","environment","transform","hasSourceMap","errors","code","item","shebang","banner","startsWith","firstNewlinePosition","indexOf","substring","commentsFilename","filename","query","querySplit","substr","lastSlashIndex","lastIndexOf","basename","data","getPath","relative","dirname","replace","extractedCommentsString","sort","extractedCommentsSource","storePromise","newInfo","related","license","set","updateAsset","limit","end","from","reduce","previousPromise","value","previous","previousFrom","prevSource","mergedName","previousValue","currentValue","mergeEtags","Set","existingAsset","emitAsset","arrowFunction","const","destructuring","forOf","bigIntLiteral","dynamicImport","apply","pluginName","hooks","tap","javascript","JavascriptModulesPlugin","getCompilationHooks","getMinimizerVersion","chunkHash","hash","update","processAssets","tapPromise","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE","additionalAssets","statsPrinter","stats","print","for","green","formatFlag","exports"],"sources":["W:/Coding/finalProject/e-commerce-website/node_modules/terser-webpack-plugin/dist/index.js"],"sourcesContent":["\"use strict\";\r\n\r\nconst path = require(\"path\");\r\n\r\nconst os = require(\"os\");\r\n\r\nconst {\r\n  SourceMapConsumer\r\n} = require(\"source-map\");\r\n\r\nconst {\r\n  validate\r\n} = require(\"schema-utils\");\r\n\r\nconst serialize = require(\"serialize-javascript\");\r\n\r\nconst {\r\n  Worker\r\n} = require(\"jest-worker\");\r\n\r\nconst {\r\n  throttleAll,\r\n  terserMinify,\r\n  uglifyJsMinify,\r\n  swcMinify,\r\n  esbuildMinify\r\n} = require(\"./utils\");\r\n\r\nconst schema = require(\"./options.json\");\r\n\r\nconst {\r\n  minify\r\n} = require(\"./minify\");\r\n/** @typedef {import(\"schema-utils/declarations/validate\").Schema} Schema */\r\n\r\n/** @typedef {import(\"webpack\").Compiler} Compiler */\r\n\r\n/** @typedef {import(\"webpack\").Compilation} Compilation */\r\n\r\n/** @typedef {import(\"webpack\").WebpackError} WebpackError */\r\n\r\n/** @typedef {import(\"webpack\").Asset} Asset */\r\n\r\n/** @typedef {import(\"./utils.js\").TerserECMA} TerserECMA */\r\n\r\n/** @typedef {import(\"./utils.js\").TerserOptions} TerserOptions */\r\n\r\n/** @typedef {import(\"jest-worker\").Worker} JestWorker */\r\n\r\n/** @typedef {import(\"source-map\").RawSourceMap} RawSourceMap */\r\n\r\n/** @typedef {RegExp | string} Rule */\r\n\r\n/** @typedef {Rule[] | Rule} Rules */\r\n\r\n/**\r\n * @callback ExtractCommentsFunction\r\n * @param {any} astNode\r\n * @param {{ value: string, type: 'comment1' | 'comment2' | 'comment3' | 'comment4', pos: number, line: number, col: number }} comment\r\n * @returns {boolean}\r\n */\r\n\r\n/**\r\n * @typedef {boolean | 'all' | 'some' | RegExp | ExtractCommentsFunction} ExtractCommentsCondition\r\n */\r\n\r\n/**\r\n * @typedef {string | ((fileData: any) => string)} ExtractCommentsFilename\r\n */\r\n\r\n/**\r\n * @typedef {boolean | string | ((commentsFile: string) => string)} ExtractCommentsBanner\r\n */\r\n\r\n/**\r\n * @typedef {Object} ExtractCommentsObject\r\n * @property {ExtractCommentsCondition} [condition]\r\n * @property {ExtractCommentsFilename} [filename]\r\n * @property {ExtractCommentsBanner} [banner]\r\n */\r\n\r\n/**\r\n * @typedef {ExtractCommentsCondition | ExtractCommentsObject} ExtractCommentsOptions\r\n */\r\n\r\n/**\r\n * @typedef {Object} MinimizedResult\r\n * @property {string} code\r\n * @property {RawSourceMap} [map]\r\n * @property {Array<Error | string>} [errors]\r\n * @property {Array<Error | string>} [warnings]\r\n * @property {Array<string>} [extractedComments]\r\n */\r\n\r\n/**\r\n * @typedef {{ [file: string]: string }} Input\r\n */\r\n\r\n/**\r\n * @typedef {{ [key: string]: any }} CustomOptions\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {T extends infer U ? U : CustomOptions} InferDefaultType\r\n */\r\n\r\n/**\r\n * @typedef {Object} PredefinedOptions\r\n * @property {boolean} [module]\r\n * @property {TerserECMA} [ecma]\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {PredefinedOptions & InferDefaultType<T>} MinimizerOptions\r\n */\r\n\r\n/**\r\n * @template T\r\n * @callback BasicMinimizerImplementation\r\n * @param {Input} input\r\n * @param {RawSourceMap | undefined} sourceMap\r\n * @param {MinimizerOptions<T>} minifyOptions\r\n * @param {ExtractCommentsOptions | undefined} extractComments\r\n * @returns {Promise<MinimizedResult>}\r\n */\r\n\r\n/**\r\n * @typedef {object} MinimizeFunctionHelpers\r\n * @property {() => string | undefined} [getMinimizerVersion]\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {BasicMinimizerImplementation<T> & MinimizeFunctionHelpers} MinimizerImplementation\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {Object} InternalOptions\r\n * @property {string} name\r\n * @property {string} input\r\n * @property {RawSourceMap | undefined} inputSourceMap\r\n * @property {ExtractCommentsOptions | undefined} extractComments\r\n * @property {{ implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> }} minimizer\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {JestWorker & { transform: (options: string) => MinimizedResult, minify: (options: InternalOptions<T>) => MinimizedResult }} MinimizerWorker\r\n */\r\n\r\n/**\r\n * @typedef {undefined | boolean | number} Parallel\r\n */\r\n\r\n/**\r\n * @typedef {Object} BasePluginOptions\r\n * @property {Rules} [test]\r\n * @property {Rules} [include]\r\n * @property {Rules} [exclude]\r\n * @property {ExtractCommentsOptions} [extractComments]\r\n * @property {Parallel} [parallel]\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {T extends TerserOptions ? { minify?: MinimizerImplementation<T> | undefined, terserOptions?: MinimizerOptions<T> | undefined } : { minify: MinimizerImplementation<T>, terserOptions?: MinimizerOptions<T> | undefined }} DefinedDefaultMinimizerAndOptions\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {BasePluginOptions & { minimizer: { implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> } }} InternalPluginOptions\r\n */\r\n\r\n/**\r\n * @template [T=TerserOptions]\r\n */\r\n\r\n\r\nclass TerserPlugin {\r\n  /**\r\n   * @param {BasePluginOptions & DefinedDefaultMinimizerAndOptions<T>} [options]\r\n   */\r\n  constructor(options) {\r\n    validate(\r\n    /** @type {Schema} */\r\n    schema, options || {}, {\r\n      name: \"Terser Plugin\",\r\n      baseDataPath: \"options\"\r\n    }); // TODO make `minimizer` option instead `minify` and `terserOptions` in the next major release, also rename `terserMinify` to `terserMinimize`\r\n\r\n    const {\r\n      minify =\r\n      /** @type {MinimizerImplementation<T>} */\r\n      terserMinify,\r\n      terserOptions =\r\n      /** @type {MinimizerOptions<T>} */\r\n      {},\r\n      test = /\\.[cm]?js(\\?.*)?$/i,\r\n      extractComments = true,\r\n      parallel = true,\r\n      include,\r\n      exclude\r\n    } = options || {};\r\n    /**\r\n     * @private\r\n     * @type {InternalPluginOptions<T>}\r\n     */\r\n\r\n    this.options = {\r\n      test,\r\n      extractComments,\r\n      parallel,\r\n      include,\r\n      exclude,\r\n      minimizer: {\r\n        implementation: minify,\r\n        options: terserOptions\r\n      }\r\n    };\r\n  }\r\n  /**\r\n   * @private\r\n   * @param {any} input\r\n   * @returns {boolean}\r\n   */\r\n\r\n\r\n  static isSourceMap(input) {\r\n    // All required options for `new SourceMapConsumer(...options)`\r\n    // https://github.com/mozilla/source-map#new-sourcemapconsumerrawsourcemap\r\n    return Boolean(input && input.version && input.sources && Array.isArray(input.sources) && typeof input.mappings === \"string\");\r\n  }\r\n  /**\r\n   * @private\r\n   * @param {unknown} warning\r\n   * @param {string} file\r\n   * @returns {Error}\r\n   */\r\n\r\n\r\n  static buildWarning(warning, file) {\r\n    /**\r\n     * @type {Error & { hideStack: true, file: string }}\r\n     */\r\n    // @ts-ignore\r\n    const builtWarning = new Error(warning.toString());\r\n    builtWarning.name = \"Warning\";\r\n    builtWarning.hideStack = true;\r\n    builtWarning.file = file;\r\n    return builtWarning;\r\n  }\r\n  /**\r\n   * @private\r\n   * @param {any} error\r\n   * @param {string} file\r\n   * @param {SourceMapConsumer} [sourceMap]\r\n   * @param {Compilation[\"requestShortener\"]} [requestShortener]\r\n   * @returns {Error}\r\n   */\r\n\r\n\r\n  static buildError(error, file, sourceMap, requestShortener) {\r\n    /**\r\n     * @type {Error & { file?: string }}\r\n     */\r\n    let builtError;\r\n\r\n    if (typeof error === \"string\") {\r\n      builtError = new Error(`${file} from Terser plugin\\n${error}`);\r\n      builtError.file = file;\r\n      return builtError;\r\n    }\r\n\r\n    if (error.line) {\r\n      const original = sourceMap && sourceMap.originalPositionFor({\r\n        line: error.line,\r\n        column: error.col\r\n      });\r\n\r\n      if (original && original.source && requestShortener) {\r\n        builtError = new Error(`${file} from Terser plugin\\n${error.message} [${requestShortener.shorten(original.source)}:${original.line},${original.column}][${file}:${error.line},${error.col}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\r\n        builtError.file = file;\r\n        return builtError;\r\n      }\r\n\r\n      builtError = new Error(`${file} from Terser plugin\\n${error.message} [${file}:${error.line},${error.col}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\r\n      builtError.file = file;\r\n      return builtError;\r\n    }\r\n\r\n    if (error.stack) {\r\n      builtError = new Error(`${file} from Terser plugin\\n${typeof error.message !== \"undefined\" ? error.message : \"\"}\\n${error.stack}`);\r\n      builtError.file = file;\r\n      return builtError;\r\n    }\r\n\r\n    builtError = new Error(`${file} from Terser plugin\\n${error.message}`);\r\n    builtError.file = file;\r\n    return builtError;\r\n  }\r\n  /**\r\n   * @private\r\n   * @param {Parallel} parallel\r\n   * @returns {number}\r\n   */\r\n\r\n\r\n  static getAvailableNumberOfCores(parallel) {\r\n    // In some cases cpus() returns undefined\r\n    // https://github.com/nodejs/node/issues/19022\r\n    const cpus = os.cpus() || {\r\n      length: 1\r\n    };\r\n    return parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\r\n  }\r\n  /**\r\n   * @private\r\n   * @param {Compiler} compiler\r\n   * @param {Compilation} compilation\r\n   * @param {Record<string, import(\"webpack\").sources.Source>} assets\r\n   * @param {{availableNumberOfCores: number}} optimizeOptions\r\n   * @returns {Promise<void>}\r\n   */\r\n\r\n\r\n  async optimize(compiler, compilation, assets, optimizeOptions) {\r\n    const cache = compilation.getCache(\"TerserWebpackPlugin\");\r\n    let numberOfAssets = 0;\r\n    const assetsForMinify = await Promise.all(Object.keys(assets).filter(name => {\r\n      const {\r\n        info\r\n      } =\r\n      /** @type {Asset} */\r\n      compilation.getAsset(name);\r\n\r\n      if ( // Skip double minimize assets from child compilation\r\n      info.minimized || // Skip minimizing for extracted comments assets\r\n      info.extractedComments) {\r\n        return false;\r\n      }\r\n\r\n      if (!compiler.webpack.ModuleFilenameHelpers.matchObject.bind( // eslint-disable-next-line no-undefined\r\n      undefined, this.options)(name)) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    }).map(async name => {\r\n      const {\r\n        info,\r\n        source\r\n      } =\r\n      /** @type {Asset} */\r\n      compilation.getAsset(name);\r\n      const eTag = cache.getLazyHashedEtag(source);\r\n      const cacheItem = cache.getItemCache(name, eTag);\r\n      const output = await cacheItem.getPromise();\r\n\r\n      if (!output) {\r\n        numberOfAssets += 1;\r\n      }\r\n\r\n      return {\r\n        name,\r\n        info,\r\n        inputSource: source,\r\n        output,\r\n        cacheItem\r\n      };\r\n    }));\r\n\r\n    if (assetsForMinify.length === 0) {\r\n      return;\r\n    }\r\n    /** @type {undefined | (() => MinimizerWorker<T>)} */\r\n\r\n\r\n    let getWorker;\r\n    /** @type {undefined | MinimizerWorker<T>} */\r\n\r\n    let initializedWorker;\r\n    /** @type {undefined | number} */\r\n\r\n    let numberOfWorkers;\r\n\r\n    if (optimizeOptions.availableNumberOfCores > 0) {\r\n      // Do not create unnecessary workers when the number of files is less than the available cores, it saves memory\r\n      numberOfWorkers = Math.min(numberOfAssets, optimizeOptions.availableNumberOfCores); // eslint-disable-next-line consistent-return\r\n\r\n      getWorker = () => {\r\n        if (initializedWorker) {\r\n          return initializedWorker;\r\n        }\r\n\r\n        initializedWorker =\r\n        /** @type {MinimizerWorker<T>} */\r\n        new Worker(require.resolve(\"./minify\"), {\r\n          numWorkers: numberOfWorkers,\r\n          enableWorkerThreads: true\r\n        }); // https://github.com/facebook/jest/issues/8872#issuecomment-524822081\r\n\r\n        const workerStdout = initializedWorker.getStdout();\r\n\r\n        if (workerStdout) {\r\n          workerStdout.on(\"data\", chunk => process.stdout.write(chunk));\r\n        }\r\n\r\n        const workerStderr = initializedWorker.getStderr();\r\n\r\n        if (workerStderr) {\r\n          workerStderr.on(\"data\", chunk => process.stderr.write(chunk));\r\n        }\r\n\r\n        return initializedWorker;\r\n      };\r\n    }\r\n\r\n    const {\r\n      SourceMapSource,\r\n      ConcatSource,\r\n      RawSource\r\n    } = compiler.webpack.sources;\r\n    /** @typedef {{ extractedCommentsSource : import(\"webpack\").sources.RawSource, commentsFilename: string }} ExtractedCommentsInfo */\r\n\r\n    /** @type {Map<string, ExtractedCommentsInfo>} */\r\n\r\n    const allExtractedComments = new Map();\r\n    const scheduledTasks = [];\r\n\r\n    for (const asset of assetsForMinify) {\r\n      scheduledTasks.push(async () => {\r\n        const {\r\n          name,\r\n          inputSource,\r\n          info,\r\n          cacheItem\r\n        } = asset;\r\n        let {\r\n          output\r\n        } = asset;\r\n\r\n        if (!output) {\r\n          let input;\r\n          /** @type {RawSourceMap | undefined} */\r\n\r\n          let inputSourceMap;\r\n          const {\r\n            source: sourceFromInputSource,\r\n            map\r\n          } = inputSource.sourceAndMap();\r\n          input = sourceFromInputSource;\r\n\r\n          if (map) {\r\n            if (!TerserPlugin.isSourceMap(map)) {\r\n              compilation.warnings.push(\r\n              /** @type {WebpackError} */\r\n              new Error(`${name} contains invalid source map`));\r\n            } else {\r\n              inputSourceMap =\r\n              /** @type {RawSourceMap} */\r\n              map;\r\n            }\r\n          }\r\n\r\n          if (Buffer.isBuffer(input)) {\r\n            input = input.toString();\r\n          }\r\n          /**\r\n           * @type {InternalOptions<T>}\r\n           */\r\n\r\n\r\n          const options = {\r\n            name,\r\n            input,\r\n            inputSourceMap,\r\n            minimizer: {\r\n              implementation: this.options.minimizer.implementation,\r\n              // @ts-ignore https://github.com/Microsoft/TypeScript/issues/10727\r\n              options: { ...this.options.minimizer.options\r\n              }\r\n            },\r\n            extractComments: this.options.extractComments\r\n          };\r\n\r\n          if (typeof options.minimizer.options.module === \"undefined\") {\r\n            if (typeof info.javascriptModule !== \"undefined\") {\r\n              options.minimizer.options.module = info.javascriptModule;\r\n            } else if (/\\.mjs(\\?.*)?$/i.test(name)) {\r\n              options.minimizer.options.module = true;\r\n            } else if (/\\.cjs(\\?.*)?$/i.test(name)) {\r\n              options.minimizer.options.module = false;\r\n            }\r\n          }\r\n\r\n          if (typeof options.minimizer.options.ecma === \"undefined\") {\r\n            options.minimizer.options.ecma = TerserPlugin.getEcmaVersion(compiler.options.output.environment || {});\r\n          }\r\n\r\n          try {\r\n            output = await (getWorker ? getWorker().transform(serialize(options)) : minify(options));\r\n          } catch (error) {\r\n            const hasSourceMap = inputSourceMap && TerserPlugin.isSourceMap(inputSourceMap);\r\n            compilation.errors.push(\r\n            /** @type {WebpackError} */\r\n            TerserPlugin.buildError(error, name, hasSourceMap ? new SourceMapConsumer(\r\n            /** @type {RawSourceMap} */\r\n            inputSourceMap) : // eslint-disable-next-line no-undefined\r\n            undefined, // eslint-disable-next-line no-undefined\r\n            hasSourceMap ? compilation.requestShortener : undefined));\r\n            return;\r\n          }\r\n\r\n          if (typeof output.code === \"undefined\") {\r\n            compilation.errors.push(\r\n            /** @type {WebpackError} */\r\n            new Error(`${name} from Terser plugin\\nMinimizer doesn't return result`));\r\n            return;\r\n          }\r\n\r\n          if (output.warnings && output.warnings.length > 0) {\r\n            output.warnings = output.warnings.map(\r\n            /**\r\n             * @param {Error | string} item\r\n             */\r\n            item => TerserPlugin.buildWarning(item, name));\r\n          }\r\n\r\n          if (output.errors && output.errors.length > 0) {\r\n            const hasSourceMap = inputSourceMap && TerserPlugin.isSourceMap(inputSourceMap);\r\n            output.errors = output.errors.map(\r\n            /**\r\n             * @param {Error | string} item\r\n             */\r\n            item => TerserPlugin.buildError(item, name, hasSourceMap ? new SourceMapConsumer(\r\n            /** @type {RawSourceMap} */\r\n            inputSourceMap) : // eslint-disable-next-line no-undefined\r\n            undefined, // eslint-disable-next-line no-undefined\r\n            hasSourceMap ? compilation.requestShortener : undefined));\r\n          }\r\n\r\n          let shebang;\r\n\r\n          if (\r\n          /** @type {ExtractCommentsObject} */\r\n          this.options.extractComments.banner !== false && output.extractedComments && output.extractedComments.length > 0 && output.code.startsWith(\"#!\")) {\r\n            const firstNewlinePosition = output.code.indexOf(\"\\n\");\r\n            shebang = output.code.substring(0, firstNewlinePosition);\r\n            output.code = output.code.substring(firstNewlinePosition + 1);\r\n          }\r\n\r\n          if (output.map) {\r\n            output.source = new SourceMapSource(output.code, name, output.map, input,\r\n            /** @type {RawSourceMap} */\r\n            inputSourceMap, true);\r\n          } else {\r\n            output.source = new RawSource(output.code);\r\n          }\r\n\r\n          if (output.extractedComments && output.extractedComments.length > 0) {\r\n            const commentsFilename =\r\n            /** @type {ExtractCommentsObject} */\r\n            this.options.extractComments.filename || \"[file].LICENSE.txt[query]\";\r\n            let query = \"\";\r\n            let filename = name;\r\n            const querySplit = filename.indexOf(\"?\");\r\n\r\n            if (querySplit >= 0) {\r\n              query = filename.substr(querySplit);\r\n              filename = filename.substr(0, querySplit);\r\n            }\r\n\r\n            const lastSlashIndex = filename.lastIndexOf(\"/\");\r\n            const basename = lastSlashIndex === -1 ? filename : filename.substr(lastSlashIndex + 1);\r\n            const data = {\r\n              filename,\r\n              basename,\r\n              query\r\n            };\r\n            output.commentsFilename = compilation.getPath(commentsFilename, data);\r\n            let banner; // Add a banner to the original file\r\n\r\n            if (\r\n            /** @type {ExtractCommentsObject} */\r\n            this.options.extractComments.banner !== false) {\r\n              banner =\r\n              /** @type {ExtractCommentsObject} */\r\n              this.options.extractComments.banner || `For license information please see ${path.relative(path.dirname(name), output.commentsFilename).replace(/\\\\/g, \"/\")}`;\r\n\r\n              if (typeof banner === \"function\") {\r\n                banner = banner(output.commentsFilename);\r\n              }\r\n\r\n              if (banner) {\r\n                output.source = new ConcatSource(shebang ? `${shebang}\\n` : \"\", `/*! ${banner} */\\n`, output.source);\r\n              }\r\n            }\r\n\r\n            const extractedCommentsString = output.extractedComments.sort().join(\"\\n\\n\");\r\n            output.extractedCommentsSource = new RawSource(`${extractedCommentsString}\\n`);\r\n          }\r\n\r\n          await cacheItem.storePromise({\r\n            source: output.source,\r\n            errors: output.errors,\r\n            warnings: output.warnings,\r\n            commentsFilename: output.commentsFilename,\r\n            extractedCommentsSource: output.extractedCommentsSource\r\n          });\r\n        }\r\n\r\n        if (output.warnings && output.warnings.length > 0) {\r\n          for (const warning of output.warnings) {\r\n            compilation.warnings.push(\r\n            /** @type {WebpackError} */\r\n            warning);\r\n          }\r\n        }\r\n\r\n        if (output.errors && output.errors.length > 0) {\r\n          for (const error of output.errors) {\r\n            compilation.errors.push(\r\n            /** @type {WebpackError} */\r\n            error);\r\n          }\r\n        }\r\n        /** @type {Record<string, any>} */\r\n\r\n\r\n        const newInfo = {\r\n          minimized: true\r\n        };\r\n        const {\r\n          source,\r\n          extractedCommentsSource\r\n        } = output; // Write extracted comments to commentsFilename\r\n\r\n        if (extractedCommentsSource) {\r\n          const {\r\n            commentsFilename\r\n          } = output;\r\n          newInfo.related = {\r\n            license: commentsFilename\r\n          };\r\n          allExtractedComments.set(name, {\r\n            extractedCommentsSource,\r\n            commentsFilename\r\n          });\r\n        }\r\n\r\n        compilation.updateAsset(name, source, newInfo);\r\n      });\r\n    }\r\n\r\n    const limit = getWorker && numberOfAssets > 0 ?\r\n    /** @type {number} */\r\n    numberOfWorkers : scheduledTasks.length;\r\n    await throttleAll(limit, scheduledTasks);\r\n\r\n    if (initializedWorker) {\r\n      await initializedWorker.end();\r\n    }\r\n    /** @typedef {{ source: import(\"webpack\").sources.Source, commentsFilename: string, from: string }} ExtractedCommentsInfoWIthFrom */\r\n\r\n\r\n    await Array.from(allExtractedComments).sort().reduce(\r\n    /**\r\n     * @param {Promise<unknown>} previousPromise\r\n     * @param {[string, ExtractedCommentsInfo]} extractedComments\r\n     * @returns {Promise<ExtractedCommentsInfoWIthFrom>}\r\n     */\r\n    async (previousPromise, [from, value]) => {\r\n      const previous =\r\n      /** @type {ExtractedCommentsInfoWIthFrom | undefined} **/\r\n      await previousPromise;\r\n      const {\r\n        commentsFilename,\r\n        extractedCommentsSource\r\n      } = value;\r\n\r\n      if (previous && previous.commentsFilename === commentsFilename) {\r\n        const {\r\n          from: previousFrom,\r\n          source: prevSource\r\n        } = previous;\r\n        const mergedName = `${previousFrom}|${from}`;\r\n        const name = `${commentsFilename}|${mergedName}`;\r\n        const eTag = [prevSource, extractedCommentsSource].map(item => cache.getLazyHashedEtag(item)).reduce((previousValue, currentValue) => cache.mergeEtags(previousValue, currentValue));\r\n        let source = await cache.getPromise(name, eTag);\r\n\r\n        if (!source) {\r\n          source = new ConcatSource(Array.from(new Set([...\r\n          /** @type {string}*/\r\n          prevSource.source().split(\"\\n\\n\"), ...\r\n          /** @type {string}*/\r\n          extractedCommentsSource.source().split(\"\\n\\n\")])).join(\"\\n\\n\"));\r\n          await cache.storePromise(name, eTag, source);\r\n        }\r\n\r\n        compilation.updateAsset(commentsFilename, source);\r\n        return {\r\n          source,\r\n          commentsFilename,\r\n          from: mergedName\r\n        };\r\n      }\r\n\r\n      const existingAsset = compilation.getAsset(commentsFilename);\r\n\r\n      if (existingAsset) {\r\n        return {\r\n          source: existingAsset.source,\r\n          commentsFilename,\r\n          from: commentsFilename\r\n        };\r\n      }\r\n\r\n      compilation.emitAsset(commentsFilename, extractedCommentsSource, {\r\n        extractedComments: true\r\n      });\r\n      return {\r\n        source: extractedCommentsSource,\r\n        commentsFilename,\r\n        from\r\n      };\r\n    },\r\n    /** @type {Promise<unknown>} */\r\n    Promise.resolve());\r\n  }\r\n  /**\r\n   * @private\r\n   * @param {any} environment\r\n   * @returns {TerserECMA}\r\n   */\r\n\r\n\r\n  static getEcmaVersion(environment) {\r\n    // ES 6th\r\n    if (environment.arrowFunction || environment.const || environment.destructuring || environment.forOf || environment.module) {\r\n      return 2015;\r\n    } // ES 11th\r\n\r\n\r\n    if (environment.bigIntLiteral || environment.dynamicImport) {\r\n      return 2020;\r\n    }\r\n\r\n    return 5;\r\n  }\r\n  /**\r\n   * @param {Compiler} compiler\r\n   * @returns {void}\r\n   */\r\n\r\n\r\n  apply(compiler) {\r\n    const pluginName = this.constructor.name;\r\n    const availableNumberOfCores = TerserPlugin.getAvailableNumberOfCores(this.options.parallel);\r\n    compiler.hooks.compilation.tap(pluginName, compilation => {\r\n      const hooks = compiler.webpack.javascript.JavascriptModulesPlugin.getCompilationHooks(compilation);\r\n      const data = serialize({\r\n        minimizer: typeof this.options.minimizer.implementation.getMinimizerVersion !== \"undefined\" ? this.options.minimizer.implementation.getMinimizerVersion() || \"0.0.0\" : \"0.0.0\",\r\n        options: this.options.minimizer.options\r\n      });\r\n      hooks.chunkHash.tap(pluginName, (chunk, hash) => {\r\n        hash.update(\"TerserPlugin\");\r\n        hash.update(data);\r\n      });\r\n      compilation.hooks.processAssets.tapPromise({\r\n        name: pluginName,\r\n        stage: compiler.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE,\r\n        additionalAssets: true\r\n      }, assets => this.optimize(compiler, compilation, assets, {\r\n        availableNumberOfCores\r\n      }));\r\n      compilation.hooks.statsPrinter.tap(pluginName, stats => {\r\n        stats.hooks.print.for(\"asset.info.minimized\").tap(\"terser-webpack-plugin\", (minimized, {\r\n          green,\r\n          formatFlag\r\n        }) => minimized ?\r\n        /** @type {Function} */\r\n        green(\r\n        /** @type {Function} */\r\n        formatFlag(\"minimized\")) : \"\");\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n\r\nTerserPlugin.terserMinify = terserMinify;\r\nTerserPlugin.uglifyJsMinify = uglifyJsMinify;\r\nTerserPlugin.swcMinify = swcMinify;\r\nTerserPlugin.esbuildMinify = esbuildMinify;\r\nmodule.exports = TerserPlugin;"],"mappings":"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"},"metadata":{},"sourceType":"script"}