{"ast":null,"code":"import firebase from 'firebase/compat/app';\nexport default {\n  props: [\"bookName\", \"bookPrice\", \"bookImageURL\", \"bookYear\", \"bookGenre\", \"bookAuthor\", \"id\", \"bookID\"],\n  methods: {\n    addToCart() {\n      const db = firebase.firestore();\n      console.log(\"Inside addToCart() method\");\n\n      try {\n        db.collection('Users').doc(this.id).get().then(r => {\n          var addr1 = r.data().addrLine1;\n          var addr2 = r.data().addrLine2;\n          var mobile = r.data().mobile;\n          var city = r.data().city;\n          var landmark = r.data().landmark;\n          var name = r.data().name;\n          var state = r.data().state;\n          var zipcode = r.data().zipcode;\n          var cart = r.data().cart || [];\n          var wishlist = r.data().wishList || [];\n          var orders = r.data().orders || [];\n          var email = r.data().email; // var pfp = r.data().pfp\n          // console.log(r.data())\n\n          cart.push(this.bookID); //Removing null element if any from the array\n\n          var filtered = cart.filter(function (el) {\n            return el != '';\n          }); // source https://dev.to/soyleninjs/3-ways-to-remove-duplicates-in-an-array-in-javascript-259o : 2nd way\n          //Removing duplicate elements if any from the array \n\n          let uniqueCart = filtered.filter((element, index) => {\n            return filtered.indexOf(element) === index;\n          }); //    cart = null;\n\n          cart = uniqueCart; //    console.log(this.cart)\n\n          console.log(uniqueCart);\n          db.collection('Users').doc(this.id).set({\n            addrLine1: addr1,\n            addrLine2: addr2,\n            cart: uniqueCart,\n            city: city,\n            landmark: landmark,\n            mobile: mobile,\n            name: name,\n            orders: orders,\n            state: state,\n            wishList: wishlist,\n            zipcode: zipcode,\n            email: email,\n            pfp: pfp\n          }).then(ref => {\n            console.log('Data written successfully');\n            alert('Item added to cart successfully');\n          }); // alert(\"Item added to cart successfully.\") \n        });\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    removeFromWishList() {\n      console.log(this.id);\n      const db = firebase.firestore();\n      console.log(\"Inside removeFromWishList() method\");\n\n      try {\n        db.collection('Users').doc(this.id).get().then(r => {\n          console.log(r.data());\n          var addr1 = r.data().addrLine1;\n          var addr2 = r.data().addrLine2;\n          var mobile = r.data().mobile;\n          var city = r.data().city;\n          var landmark = r.data().landmark;\n          var name = r.data().name;\n          var state = r.data().state;\n          var zipcode = r.data().zipcode;\n          var cart = r.data().cart || [];\n          var wishlist = r.data().wishList || [];\n          var orders = r.data().orders || [];\n          var email = r.data().email; // var pfp = r.data().pfp\n          // console.log(r.data());\n          // console.log(r.data())\n          // console.log(wishlist)\n          // wishlist.pop(this.id)\n\n          let remove = [];\n          remove = wishlist.filter(id => id !== this.bookID);\n          console.log(this.BookID);\n          console.log(wishlist);\n          console.log(\"removed array \" + remove);\n          db.collection('Users').doc(this.id).set({\n            addrLine1: addr1,\n            addrLine2: addr2,\n            cart: cart,\n            city: city,\n            landmark: landmark,\n            mobile: mobile,\n            name: name,\n            orders: orders,\n            state: state,\n            wishList: remove,\n            zipcode: zipcode,\n            email: email,\n            pfp: pfp\n          }).then(ref => {\n            this.$router.go();\n          });\n          console.log('Data updated successfully'); // alert('Item removed from wishlist successfully')\n          // alert(\"Item added to cart successfully.\") \n        });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["firebase","props","methods","addToCart","db","firestore","console","log","collection","doc","id","get","then","r","addr1","data","addrLine1","addr2","addrLine2","mobile","city","landmark","name","state","zipcode","cart","wishlist","wishList","orders","email","push","bookID","filtered","filter","el","uniqueCart","element","index","indexOf","set","pfp","ref","alert","e","removeFromWishList","remove","BookID","$router","go"],"sourceRoot":"","sources":["W:\\Coding\\finalProject\\e-commerce-website\\src\\components\\WishList\\WishBooks.vue"],"sourcesContent":["<script>\r\nimport firebase from 'firebase/compat/app';\r\nexport default {\r\n    props:[\"bookName\",\"bookPrice\",\"bookImageURL\",\"bookYear\",\"bookGenre\",\"bookAuthor\",\"id\", \"bookID\"],\r\n    methods: { \r\n        addToCart(){\r\n            const db = firebase.firestore(); \r\n        console.log(\"Inside addToCart() method\")\r\n        try{\r\n        db.collection('Users').doc(this.id).get().then((r) => {\r\n            var addr1 = r.data().addrLine1\r\n            var addr2 = r.data().addrLine2\r\n            var mobile = r.data().mobile\r\n            var city = r.data().city\r\n            var landmark = r.data().landmark\r\n            var name = r.data().name\r\n            var state = r.data().state\r\n            var zipcode = r.data().zipcode\r\n            var cart = r.data().cart || []\r\n            var wishlist = r.data().wishList || []\r\n            var orders = r.data().orders || []\r\n            var email = r.data().email\r\n            // var pfp = r.data().pfp\r\n\r\n            // console.log(r.data())\r\n\r\n            cart.push(this.bookID)\r\n            \r\n            //Removing null element if any from the array\r\n            var filtered = cart.filter(function (el) {\r\n            return el != '';\r\n            });\r\n\r\n            // source https://dev.to/soyleninjs/3-ways-to-remove-duplicates-in-an-array-in-javascript-259o : 2nd way\r\n            //Removing duplicate elements if any from the array \r\n            let uniqueCart = filtered.filter((element, index) => {\r\n                return filtered.indexOf(element) === index;\r\n            });\r\n\r\n        //    cart = null;\r\n           cart = uniqueCart;\r\n        //    console.log(this.cart)\r\n           console.log(uniqueCart)\r\n\r\n            db.collection('Users').doc(this.id).set({\r\n            addrLine1: addr1,\r\n            addrLine2: addr2,\r\n            cart: uniqueCart,\r\n            city: city,\r\n            landmark:landmark,\r\n            mobile: mobile,\r\n            name: name,\r\n            orders: orders,\r\n            state: state,\r\n            wishList: wishlist,\r\n            zipcode: zipcode,\r\n            email: email,\r\n            pfp: pfp\r\n            \r\n        }).then((ref) => {\r\n             console.log('Data written successfully')\r\n        alert('Item added to cart successfully')\r\n        });\r\n       \r\n            // alert(\"Item added to cart successfully.\") \r\n        });\r\n\r\n            \r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n            \r\n        },\r\n        removeFromWishList(){\r\n            console.log(this.id)\r\n             const db = firebase.firestore(); \r\n        console.log(\"Inside removeFromWishList() method\")\r\n        try{\r\n        db.collection('Users').doc(this.id).get().then((r) => {\r\n            console.log(r.data())\r\n            var addr1 = r.data().addrLine1\r\n            var addr2 = r.data().addrLine2\r\n            var mobile = r.data().mobile\r\n            var city = r.data().city\r\n            var landmark = r.data().landmark\r\n            var name = r.data().name\r\n            var state = r.data().state\r\n            var zipcode = r.data().zipcode\r\n            var cart = r.data().cart || []\r\n            var wishlist = r.data().wishList || []\r\n            var orders = r.data().orders || []\r\n            var email = r.data().email\r\n            // var pfp = r.data().pfp\r\n\r\n        // console.log(r.data());\r\n            // console.log(r.data())\r\n            // console.log(wishlist)\r\n            // wishlist.pop(this.id)\r\n            let remove = []\r\n            remove = wishlist.filter((id) => id !== this.bookID)\r\n            console.log(this.BookID)\r\n            console.log(wishlist)\r\n            console.log(\"removed array \" +remove)\r\n\r\n            db.collection('Users').doc(this.id).set({\r\n            addrLine1: addr1,\r\n            addrLine2: addr2,\r\n            cart: cart,\r\n            city: city,\r\n            landmark:landmark,\r\n            mobile: mobile,\r\n            name: name,\r\n            orders: orders,\r\n            state: state,\r\n            wishList: remove,\r\n            zipcode: zipcode,\r\n            email: email,\r\n            pfp: pfp\r\n        }).then((ref) => {\r\n            this.$router.go()\r\n        });\r\n            \r\n        console.log('Data updated successfully')\r\n        // alert('Item removed from wishlist successfully')\r\n            // alert(\"Item added to cart successfully.\") \r\n        });\r\n\r\n            \r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n        }\r\n   }\r\n}\r\n</script>\r\n\r\n<template>\r\n \r\n  <div class=\"mb-5\">\r\n          <div class=\"flex justify-between\">\r\n                <router-link to=\"/book\">\r\n                <div class=\"pl-4 pt-3 flex\">\r\n                    <img class=\"h-52\" :src=\"bookImageURL\" alt=\"\">\r\n                    <div class=\"ml-5 mt-1\">\r\n                        <div class=\"font-medium text-lg\">{{bookName}}</div>\r\n                        <div class=\"font-normal text-sm text-gray-600\">Author: {{bookAuthor}}</div>\r\n                        <div class=\"font-normal text-sm text-gray-600\">Genre: {{bookGenre}}</div>\r\n                        <div class=\"font-normal text-sm text-gray-600\">Publication Date: {{bookYear}}</div>\r\n                    </div>\r\n                </div>\r\n                </router-link>\r\n                <div class=\"mr-20 flex flex-col justify-between items-end\">\r\n                    <div class=\"text-4xl font-bold text-gray-700 mr-5 mt-5\">\r\n                        â‚¹ {{bookPrice}}\r\n                    </div>\r\n                    <div class=\" flex gap-5\">\r\n                        <div class=\"bg-secondary-1 px-3 py-1 text-white hover:bg-primary-1 hover:text-secondary-1 cursor-pointer\" @click=\"addToCart\">Add to Cart</div>\r\n                        <div class=\"bg-secondary-1 px-3 py-1 text-white hover:bg-primary-1 hover:text-secondary-1 cursor-pointer\" @click=\"removeFromWishList\">Remove from Wishlist</div>\r\n                    </div>\r\n                </div>\r\n      </div>\r\n  </div>\r\n  <div class=\"bg-gray-300 w-full h-px ml-4\"></div>\r\n\r\n</template>\r\n\r\n\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}