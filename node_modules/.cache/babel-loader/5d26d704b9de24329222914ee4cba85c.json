{"ast":null,"code":"import firebase from 'firebase/compat/app';\nexport default {\n  data() {\n    return {\n      total: 0,\n      // Use book ID here\n      // query: `{name: 'book', query:{id:this.bookID}}`\n      query: '/book',\n      id: this.$route.query.id,\n      quantity: parseInt(this.bookQuantity),\n      price: parseInt(this.bookPrice),\n      total: parseInt(this.bookPrice) * parseInt(this.bookQuantity)\n    };\n  },\n\n  emits: [\"updateCart\"],\n  props: [\"bookName\", \"bookAuthor\", \"bookSubject\", \"bookGenre\", \"bookDate\", \"bookImageURL\", \"bookPrice\", \"bookID\", \"bookQuantity\"],\n  methods: {\n    totalPrice() {\n      this.total = this.price * this.quantity;\n    },\n\n    increment() {\n      this.quantity++; // console.log(this.quantity)\n\n      this.totalPrice();\n      this.$emit(\"calculate\", this.price, 1, this.bookID);\n    },\n\n    decrement() {\n      if (this.quantity > 0) {\n        this.quantity--;\n        this.totalPrice();\n        this.$emit(\"calculate\", -this.price, -1, this.bookID);\n      }\n    },\n\n    removeFromCart() {\n      console.log(this.id);\n      const db = firebase.firestore();\n      console.log(\"Inside removeFromWishList() method\");\n\n      try {\n        db.collection('Users').doc(this.id).get().then(r => {\n          console.log(r.data());\n          var addr1 = r.data().addrLine1;\n          var addr2 = r.data().addrLine2;\n          var mobile = r.data().mobile;\n          var city = r.data().city;\n          var landmark = r.data().landmark;\n          var name = r.data().name;\n          var state = r.data().state;\n          var zipcode = r.data().zipcode;\n          var cart = r.data().cart || [];\n          var wishlist = r.data().wishList || [];\n          var orders = r.data().orders || [];\n          var email = r.data().email; // var pfp = r.data().pfp\n          // console.log(r.data());\n          // console.log(r.data())\n          // console.log(wishlist)\n          // wishlist.pop(this.id)\n\n          let remove = [];\n          remove = cart.filter(id => id !== this.bookID);\n          console.log(this.bookID);\n          console.log(cart);\n          console.log(\"removed array \" + remove);\n          this.$emit(\"updateCart\", remove);\n          db.collection('Users').doc(this.id).set({\n            addrLine1: addr1,\n            addrLine2: addr2,\n            cart: remove,\n            city: city,\n            landmark: landmark,\n            mobile: mobile,\n            name: name,\n            orders: orders,\n            state: state,\n            wishList: wishlist,\n            zipcode: zipcode,\n            email: email // pfp: pfp\n\n          }).then(ref => {\n            // this.$router.go()\n            console.log(remove);\n          });\n          console.log('Data updated successfully'); // alert('Item removed from wishlist successfully')\n          // alert(\"Item added to cart successfully.\") \n        });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n  },\n\n  mounted() {}\n\n};","map":{"version":3,"mappings":"AACA,OAAOA,QAAP,MAAqB,qBAArB;AACA,eAAc;EACVC,IAAI,GAAE;IACF,OAAM;MACFC,KAAK,EAAE,CADL;MAEF;MACA;MACAC,KAAK,EAAE,OAJL;MAKFC,EAAE,EAAE,KAAKC,MAAL,CAAYF,KAAZ,CAAkBC,EALpB;MAMFE,QAAQ,EAAEC,QAAQ,CAAC,KAAKC,YAAN,CANhB;MAOFC,KAAK,EAAEF,QAAQ,CAAC,KAAKG,SAAN,CAPb;MAQFR,KAAK,EAAEK,QAAQ,CAAC,KAAKG,SAAN,CAAR,GAAyBH,QAAQ,CAAC,KAAKC,YAAN;IARtC,CAAN;EAUH,CAZS;;EAaVG,KAAK,EAAE,CAAC,YAAD,CAbG;EAcVC,KAAK,EAAC,CAAC,UAAD,EAAY,YAAZ,EAAyB,aAAzB,EAAuC,WAAvC,EAAmD,UAAnD,EAA8D,cAA9D,EAA8E,WAA9E,EAA2F,QAA3F,EAAqG,cAArG,CAdI;EAeVC,OAAO,EACP;IACIC,UAAU,GACV;MACI,KAAKZ,KAAL,GAAY,KAAKO,KAAL,GAAW,KAAKH,QAA5B;IACH,CAJL;;IAKIS,SAAS,GAAE;MACP,KAAKT,QAAL,GADO,CAEP;;MACA,KAAKQ,UAAL;MACA,KAAKE,KAAL,CAAW,WAAX,EAAuB,KAAKP,KAA5B,EAAkC,CAAlC,EAAoC,KAAKQ,MAAzC;IACH,CAVL;;IAWIC,SAAS,GAAE;MACP,IAAG,KAAKZ,QAAL,GAAgB,CAAnB,EAAqB;QACrB,KAAKA,QAAL;QACA,KAAKQ,UAAL;QACA,KAAKE,KAAL,CAAW,WAAX,EAAuB,CAAC,KAAKP,KAA7B,EAAmC,CAAC,CAApC,EAAsC,KAAKQ,MAA3C;MACA;IACH,CAjBL;;IAkBIE,cAAc,GAAE;MACZC,OAAO,CAACC,GAAR,CAAY,KAAKjB,EAAjB;MACC,MAAMkB,EAAC,GAAItB,QAAQ,CAACuB,SAAT,EAAX;MACLH,OAAO,CAACC,GAAR,CAAY,oCAAZ;;MACA,IAAG;QACHC,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2B,KAAKrB,EAAhC,EAAoCsB,GAApC,GAA0CC,IAA1C,CAAgDC,CAAD,IAAO;UAClDR,OAAO,CAACC,GAAR,CAAYO,CAAC,CAAC3B,IAAF,EAAZ;UACA,IAAI4B,KAAI,GAAID,CAAC,CAAC3B,IAAF,GAAS6B,SAArB;UACA,IAAIC,KAAI,GAAIH,CAAC,CAAC3B,IAAF,GAAS+B,SAArB;UACA,IAAIC,MAAK,GAAIL,CAAC,CAAC3B,IAAF,GAASgC,MAAtB;UACA,IAAIC,IAAG,GAAIN,CAAC,CAAC3B,IAAF,GAASiC,IAApB;UACA,IAAIC,QAAO,GAAIP,CAAC,CAAC3B,IAAF,GAASkC,QAAxB;UACA,IAAIC,IAAG,GAAIR,CAAC,CAAC3B,IAAF,GAASmC,IAApB;UACA,IAAIC,KAAI,GAAIT,CAAC,CAAC3B,IAAF,GAASoC,KAArB;UACA,IAAIC,OAAM,GAAIV,CAAC,CAAC3B,IAAF,GAASqC,OAAvB;UACA,IAAIC,IAAG,GAAIX,CAAC,CAAC3B,IAAF,GAASsC,IAAT,IAAiB,EAA5B;UACA,IAAIC,QAAO,GAAIZ,CAAC,CAAC3B,IAAF,GAASwC,QAAT,IAAqB,EAApC;UACA,IAAIC,MAAK,GAAId,CAAC,CAAC3B,IAAF,GAASyC,MAAT,IAAmB,EAAhC;UACA,IAAIC,KAAI,GAAIf,CAAC,CAAC3B,IAAF,GAAS0C,KAArB,CAbkD,CAclD;UAEJ;UACI;UACA;UACA;;UACA,IAAIC,MAAK,GAAI,EAAb;UACAA,MAAK,GAAIL,IAAI,CAACM,MAAL,CAAazC,EAAD,IAAQA,EAAC,KAAM,KAAKa,MAAhC,CAAT;UACAG,OAAO,CAACC,GAAR,CAAY,KAAKJ,MAAjB;UACAG,OAAO,CAACC,GAAR,CAAYkB,IAAZ;UACAnB,OAAO,CAACC,GAAR,CAAY,mBAAkBuB,MAA9B;UAEA,KAAK5B,KAAL,CAAW,YAAX,EAAwB4B,MAAxB;UAEAtB,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2B,KAAKrB,EAAhC,EAAoC0C,GAApC,CAAwC;YACxChB,SAAS,EAAED,KAD6B;YAExCG,SAAS,EAAED,KAF6B;YAGxCQ,IAAI,EAAEK,MAHkC;YAIxCV,IAAI,EAAEA,IAJkC;YAKxCC,QAAQ,EAACA,QAL+B;YAMxCF,MAAM,EAAEA,MANgC;YAOxCG,IAAI,EAAEA,IAPkC;YAQxCM,MAAM,EAAEA,MARgC;YASxCL,KAAK,EAAEA,KATiC;YAUxCI,QAAQ,EAAED,QAV8B;YAWxCF,OAAO,EAAEA,OAX+B;YAYxCK,KAAK,EAAEA,KAZiC,CAaxC;;UAbwC,CAAxC,EAcDhB,IAdC,CAcKoB,GAAD,IAAS;YACb;YACA3B,OAAO,CAACC,GAAR,CAAYuB,MAAZ;UACH,CAjBG;UAmBJxB,OAAO,CAACC,GAAR,CAAY,2BAAZ,EA/CsD,CAgDtD;UACI;QACH,CAlDD;MAqDC,CAtDD,CAsDC,OAAM2B,CAAN,EAAQ;QACL5B,OAAO,CAACC,GAAR,CAAY2B,CAAZ;MACJ;IAEA;;EAhFJ,CAhBU;;EAkGVC,OAAO,GAAE,CAET;;AApGU,CAAd","names":["firebase","data","total","query","id","$route","quantity","parseInt","bookQuantity","price","bookPrice","emits","props","methods","totalPrice","increment","$emit","bookID","decrement","removeFromCart","console","log","db","firestore","collection","doc","get","then","r","addr1","addrLine1","addr2","addrLine2","mobile","city","landmark","name","state","zipcode","cart","wishlist","wishList","orders","email","remove","filter","set","ref","e","mounted"],"sourceRoot":"","sources":["W:\\Coding\\finalProject\\e-commerce-website\\src\\components\\Search\\OrderCart.vue"],"sourcesContent":["<script>\r\nimport firebase from 'firebase/compat/app';\r\nexport default{\r\n    data(){\r\n        return{\r\n            total: 0,\r\n            // Use book ID here\r\n            // query: `{name: 'book', query:{id:this.bookID}}`\r\n            query: '/book',\r\n            id: this.$route.query.id,\r\n            quantity: parseInt(this.bookQuantity),\r\n            price: parseInt(this.bookPrice),\r\n            total: parseInt(this.bookPrice)*parseInt(this.bookQuantity),\r\n        }\r\n    },\r\n    emits: [\"updateCart\"],\r\n    props:[\"bookName\",\"bookAuthor\",\"bookSubject\",\"bookGenre\",\"bookDate\",\"bookImageURL\", \"bookPrice\", \"bookID\", \"bookQuantity\"],\r\n    methods:\r\n    {\r\n        totalPrice()\r\n        {\r\n            this.total= this.price*this.quantity\r\n        },\r\n        increment(){\r\n            this.quantity++;\r\n            // console.log(this.quantity)\r\n            this.totalPrice()\r\n            this.$emit(\"calculate\",this.price,1,this.bookID);\r\n        },\r\n        decrement(){\r\n            if(this.quantity > 0){\r\n            this.quantity--;\r\n            this.totalPrice()\r\n            this.$emit(\"calculate\",-this.price,-1,this.bookID)\r\n            }\r\n        },\r\n        removeFromCart(){\r\n            console.log(this.id)\r\n             const db = firebase.firestore(); \r\n        console.log(\"Inside removeFromWishList() method\")\r\n        try{\r\n        db.collection('Users').doc(this.id).get().then((r) => {\r\n            console.log(r.data())\r\n            var addr1 = r.data().addrLine1\r\n            var addr2 = r.data().addrLine2\r\n            var mobile = r.data().mobile\r\n            var city = r.data().city\r\n            var landmark = r.data().landmark\r\n            var name = r.data().name\r\n            var state = r.data().state\r\n            var zipcode = r.data().zipcode\r\n            var cart = r.data().cart || []\r\n            var wishlist = r.data().wishList || []\r\n            var orders = r.data().orders || []\r\n            var email = r.data().email\r\n            // var pfp = r.data().pfp\r\n\r\n        // console.log(r.data());\r\n            // console.log(r.data())\r\n            // console.log(wishlist)\r\n            // wishlist.pop(this.id)\r\n            let remove = []\r\n            remove = cart.filter((id) => id !== this.bookID)\r\n            console.log(this.bookID)\r\n            console.log(cart)\r\n            console.log(\"removed array \" +remove)\r\n            \r\n            this.$emit(\"updateCart\",remove)\r\n\r\n            db.collection('Users').doc(this.id).set({\r\n            addrLine1: addr1,\r\n            addrLine2: addr2,\r\n            cart: remove,\r\n            city: city,\r\n            landmark:landmark,\r\n            mobile: mobile,\r\n            name: name,\r\n            orders: orders,\r\n            state: state,\r\n            wishList: wishlist,\r\n            zipcode: zipcode,\r\n            email: email,\r\n            // pfp: pfp\r\n        }).then((ref) => {\r\n            // this.$router.go()\r\n            console.log(remove);\r\n        });\r\n            \r\n        console.log('Data updated successfully')\r\n        // alert('Item removed from wishlist successfully')\r\n            // alert(\"Item added to cart successfully.\") \r\n        });\r\n\r\n            \r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n        \r\n        }\r\n    },\r\n    mounted(){\r\n            \r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n<div class=\"mt-4\">\r\n    <div class=\"w-6/6 border-2 h-40\">\r\n       <div class=\"flex\">\r\n           <div class=\" flex w-1/6\">\r\n             <!-- <router-link :to=\"query\"> -->\r\n                <img class=\"h-36 object-fill border-none w-28\" :src=\"bookImageURL\" alt=\"\">\r\n            <!-- </router-link> -->\r\n            </div>\r\n        <div class=\" w-2/6\">\r\n            <!-- <router-link :to=\"query\"> -->\r\n            <div class=\"mt-2 ml-2 font-bold text-gray-800 text-md cursor-pointer hover:text-secondary-1\">{{ bookName }}</div> \r\n            <!-- </router-link>  -->\r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">author: {{ bookAuthor }}</p> \r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">subject: {{ bookSubject }}</p> \r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">genre:{{ bookGenre }}</p> \r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">publication date:{{ bookDate }}</p>     \r\n        </div>\r\n        <div class=\"flex flex-col items-end justify-evenly mt-5\">\r\n            <div class=\"flex items-center\">\r\n                <div class=\"flex w-28\">\r\n                    <div class=\"py-1 h-8 w-8 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium\" @click=\"decrement()\">-</div>\r\n                    <div class=\"py-1 h-8 w-20 border-2 text-sm text-center  font-medium\">\r\n                        {{quantity}}</div>\r\n                    <div class=\"py-1 h-8 w-8 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium\" @click=\"increment()\">+</div>                    \r\n                </div>\r\n                <div class=\"ml-[70px] font-bold text-gray-800 text-md  \">₹{{this.price}}</div> \r\n                <div class=\"ml-24 font-bold text-gray-800 text-md  \">₹{{total}}</div>\r\n            </div>\r\n            <div>\r\n                <div class=\"py-2 w-36 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium\" @click=\"removeFromCart\">\r\n                            Remove from Cart\r\n                        </div> \r\n            </div>\r\n        </div>         \r\n    </div>\r\n</div>\r\n</div>\r\n \r\n</template>\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}