{"ast":null,"code":"/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\n\"use strict\";\n\nconst forEachBail = require(\"./forEachBail\");\n\nconst {\n  PathType,\n  getType\n} = require(\"./util/path\");\n/** @typedef {import(\"./Resolver\")} Resolver */\n\n/** @typedef {import(\"./Resolver\").ResolveRequest} ResolveRequest */\n\n/** @typedef {import(\"./Resolver\").ResolveStepHook} ResolveStepHook */\n\n/** @typedef {{alias: string|Array<string>|false, name: string, onlyModule?: boolean}} AliasOption */\n\n\nmodule.exports = class AliasPlugin {\n  /**\r\n   * @param {string | ResolveStepHook} source source\r\n   * @param {AliasOption | Array<AliasOption>} options options\r\n   * @param {string | ResolveStepHook} target target\r\n   */\n  constructor(source, options, target) {\n    this.source = source;\n    this.options = Array.isArray(options) ? options : [options];\n    this.target = target;\n  }\n  /**\r\n   * @param {Resolver} resolver the resolver\r\n   * @returns {void}\r\n   */\n\n\n  apply(resolver) {\n    const target = resolver.ensureHook(this.target);\n\n    const getAbsolutePathWithSlashEnding = maybeAbsolutePath => {\n      const type = getType(maybeAbsolutePath);\n\n      if (type === PathType.AbsolutePosix || type === PathType.AbsoluteWin) {\n        return resolver.join(maybeAbsolutePath, \"_\").slice(0, -1);\n      }\n\n      return null;\n    };\n\n    const isSubPath = (path, maybeSubPath) => {\n      const absolutePath = getAbsolutePathWithSlashEnding(maybeSubPath);\n      if (!absolutePath) return false;\n      return path.startsWith(absolutePath);\n    };\n\n    resolver.getHook(this.source).tapAsync(\"AliasPlugin\", (request, resolveContext, callback) => {\n      const innerRequest = request.request || request.path;\n      if (!innerRequest) return callback();\n      forEachBail(this.options, (item, callback) => {\n        let shouldStop = false;\n\n        if (innerRequest === item.name || !item.onlyModule && (request.request ? innerRequest.startsWith(`${item.name}/`) : isSubPath(innerRequest, item.name))) {\n          const remainingRequest = innerRequest.substr(item.name.length);\n\n          const resolveWithAlias = (alias, callback) => {\n            if (alias === false) {\n              /** @type {ResolveRequest} */\n              const ignoreObj = { ...request,\n                path: false\n              };\n\n              if (typeof resolveContext.yield === \"function\") {\n                resolveContext.yield(ignoreObj);\n                return callback(null, null);\n              }\n\n              return callback(null, ignoreObj);\n            }\n\n            if (innerRequest !== alias && !innerRequest.startsWith(alias + \"/\")) {\n              shouldStop = true;\n              const newRequestStr = alias + remainingRequest;\n              const obj = { ...request,\n                request: newRequestStr,\n                fullySpecified: false\n              };\n              return resolver.doResolve(target, obj, \"aliased with mapping '\" + item.name + \"': '\" + alias + \"' to '\" + newRequestStr + \"'\", resolveContext, (err, result) => {\n                if (err) return callback(err);\n                if (result) return callback(null, result);\n                return callback();\n              });\n            }\n\n            return callback();\n          };\n\n          const stoppingCallback = (err, result) => {\n            if (err) return callback(err);\n            if (result) return callback(null, result); // Don't allow other aliasing or raw request\n\n            if (shouldStop) return callback(null, null);\n            return callback();\n          };\n\n          if (Array.isArray(item.alias)) {\n            return forEachBail(item.alias, resolveWithAlias, stoppingCallback);\n          } else {\n            return resolveWithAlias(item.alias, stoppingCallback);\n          }\n        }\n\n        return callback();\n      }, callback);\n    });\n  }\n\n};","map":{"version":3,"names":["forEachBail","require","PathType","getType","module","exports","AliasPlugin","constructor","source","options","target","Array","isArray","apply","resolver","ensureHook","getAbsolutePathWithSlashEnding","maybeAbsolutePath","type","AbsolutePosix","AbsoluteWin","join","slice","isSubPath","path","maybeSubPath","absolutePath","startsWith","getHook","tapAsync","request","resolveContext","callback","innerRequest","item","shouldStop","name","onlyModule","remainingRequest","substr","length","resolveWithAlias","alias","ignoreObj","yield","newRequestStr","obj","fullySpecified","doResolve","err","result","stoppingCallback"],"sources":["W:/Coding/finalProject/e-commerce-website/node_modules/enhanced-resolve/lib/AliasPlugin.js"],"sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\r\n\"use strict\";\r\n\r\nconst forEachBail = require(\"./forEachBail\");\r\nconst { PathType, getType } = require(\"./util/path\");\r\n\r\n/** @typedef {import(\"./Resolver\")} Resolver */\r\n/** @typedef {import(\"./Resolver\").ResolveRequest} ResolveRequest */\r\n/** @typedef {import(\"./Resolver\").ResolveStepHook} ResolveStepHook */\r\n/** @typedef {{alias: string|Array<string>|false, name: string, onlyModule?: boolean}} AliasOption */\r\n\r\nmodule.exports = class AliasPlugin {\r\n\t/**\r\n\t * @param {string | ResolveStepHook} source source\r\n\t * @param {AliasOption | Array<AliasOption>} options options\r\n\t * @param {string | ResolveStepHook} target target\r\n\t */\r\n\tconstructor(source, options, target) {\r\n\t\tthis.source = source;\r\n\t\tthis.options = Array.isArray(options) ? options : [options];\r\n\t\tthis.target = target;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Resolver} resolver the resolver\r\n\t * @returns {void}\r\n\t */\r\n\tapply(resolver) {\r\n\t\tconst target = resolver.ensureHook(this.target);\r\n\t\tconst getAbsolutePathWithSlashEnding = maybeAbsolutePath => {\r\n\t\t\tconst type = getType(maybeAbsolutePath);\r\n\t\t\tif (type === PathType.AbsolutePosix || type === PathType.AbsoluteWin) {\r\n\t\t\t\treturn resolver.join(maybeAbsolutePath, \"_\").slice(0, -1);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst isSubPath = (path, maybeSubPath) => {\r\n\t\t\tconst absolutePath = getAbsolutePathWithSlashEnding(maybeSubPath);\r\n\t\t\tif (!absolutePath) return false;\r\n\t\t\treturn path.startsWith(absolutePath);\r\n\t\t};\r\n\t\tresolver\r\n\t\t\t.getHook(this.source)\r\n\t\t\t.tapAsync(\"AliasPlugin\", (request, resolveContext, callback) => {\r\n\t\t\t\tconst innerRequest = request.request || request.path;\r\n\t\t\t\tif (!innerRequest) return callback();\r\n\t\t\t\tforEachBail(\r\n\t\t\t\t\tthis.options,\r\n\t\t\t\t\t(item, callback) => {\r\n\t\t\t\t\t\tlet shouldStop = false;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tinnerRequest === item.name ||\r\n\t\t\t\t\t\t\t(!item.onlyModule &&\r\n\t\t\t\t\t\t\t\t(request.request\r\n\t\t\t\t\t\t\t\t\t? innerRequest.startsWith(`${item.name}/`)\r\n\t\t\t\t\t\t\t\t\t: isSubPath(innerRequest, item.name)))\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst remainingRequest = innerRequest.substr(item.name.length);\r\n\t\t\t\t\t\t\tconst resolveWithAlias = (alias, callback) => {\r\n\t\t\t\t\t\t\t\tif (alias === false) {\r\n\t\t\t\t\t\t\t\t\t/** @type {ResolveRequest} */\r\n\t\t\t\t\t\t\t\t\tconst ignoreObj = {\r\n\t\t\t\t\t\t\t\t\t\t...request,\r\n\t\t\t\t\t\t\t\t\t\tpath: false\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tif (typeof resolveContext.yield === \"function\") {\r\n\t\t\t\t\t\t\t\t\t\tresolveContext.yield(ignoreObj);\r\n\t\t\t\t\t\t\t\t\t\treturn callback(null, null);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn callback(null, ignoreObj);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tinnerRequest !== alias &&\r\n\t\t\t\t\t\t\t\t\t!innerRequest.startsWith(alias + \"/\")\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tshouldStop = true;\r\n\t\t\t\t\t\t\t\t\tconst newRequestStr = alias + remainingRequest;\r\n\t\t\t\t\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\t\t\t\t\t...request,\r\n\t\t\t\t\t\t\t\t\t\trequest: newRequestStr,\r\n\t\t\t\t\t\t\t\t\t\tfullySpecified: false\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn resolver.doResolve(\r\n\t\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\t\tobj,\r\n\t\t\t\t\t\t\t\t\t\t\"aliased with mapping '\" +\r\n\t\t\t\t\t\t\t\t\t\t\titem.name +\r\n\t\t\t\t\t\t\t\t\t\t\t\"': '\" +\r\n\t\t\t\t\t\t\t\t\t\t\talias +\r\n\t\t\t\t\t\t\t\t\t\t\t\"' to '\" +\r\n\t\t\t\t\t\t\t\t\t\t\tnewRequestStr +\r\n\t\t\t\t\t\t\t\t\t\t\t\"'\",\r\n\t\t\t\t\t\t\t\t\t\tresolveContext,\r\n\t\t\t\t\t\t\t\t\t\t(err, result) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (err) return callback(err);\r\n\t\t\t\t\t\t\t\t\t\t\tif (result) return callback(null, result);\r\n\t\t\t\t\t\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconst stoppingCallback = (err, result) => {\r\n\t\t\t\t\t\t\t\tif (err) return callback(err);\r\n\r\n\t\t\t\t\t\t\t\tif (result) return callback(null, result);\r\n\t\t\t\t\t\t\t\t// Don't allow other aliasing or raw request\r\n\t\t\t\t\t\t\t\tif (shouldStop) return callback(null, null);\r\n\t\t\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (Array.isArray(item.alias)) {\r\n\t\t\t\t\t\t\t\treturn forEachBail(\r\n\t\t\t\t\t\t\t\t\titem.alias,\r\n\t\t\t\t\t\t\t\t\tresolveWithAlias,\r\n\t\t\t\t\t\t\t\t\tstoppingCallback\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn resolveWithAlias(item.alias, stoppingCallback);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t}\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}