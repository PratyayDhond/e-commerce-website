{"ast":null,"code":"import firebase from 'firebase/compat/app';\nexport default {\n  data() {\n    return {\n      total: 0,\n      // Use book ID here\n      // query: `{name: 'book', query:{id:this.bookID}}`\n      query: '/book',\n      id: this.$route.query.id,\n      quantity: parseInt(this.bookQuantity),\n      price: parseInt(this.bookPrice),\n      total: parseInt(this.bookPrice) * parseInt(this.bookQuantity)\n    };\n  },\n\n  props: [\"bookName\", \"bookAuthor\", \"bookSubject\", \"bookGenre\", \"bookDate\", \"bookImageURL\", \"bookPrice\", \"bookID\", \"bookQuantity\"],\n  methods: {\n    totalPrice() {\n      this.total = this.price * this.quantity;\n    },\n\n    increment() {\n      this.quantity++; // console.log(this.quantity)\n\n      this.totalPrice();\n      this.$emit(\"calculate\", this.price, 1);\n    },\n\n    decrement() {\n      if (this.quantity > 0) {\n        this.quantity--; // console.log(this.quantity)\n\n        this.totalPrice(); // console.log('before this.$emit')\n\n        this.$emit(\"calculate\", -this.price, -1); // console.log('after this.$emit')\n      }\n    },\n\n    removeFromCart() {\n      console.log(this.id);\n      const db = firebase.firestore();\n      console.log(\"Inside removeFromWishList() method\");\n\n      try {\n        db.collection('Users').doc(this.id).get().then(r => {\n          console.log(r.data());\n          var addr1 = r.data().addrLine1;\n          var addr2 = r.data().addrLine2;\n          var mobile = r.data().mobile;\n          var city = r.data().city;\n          var landmark = r.data().landmark;\n          var name = r.data().name;\n          var state = r.data().state;\n          var zipcode = r.data().zipcode;\n          var cart = r.data().cart;\n          var wishlist = r.data().wishList;\n          var orders = r.data().orders;\n          var email = r.data().email;\n          var pfp = r.data().pfp; // console.log(r.data());\n          // console.log(r.data())\n          // console.log(wishlist)\n          // wishlist.pop(this.id)\n\n          let remove = [];\n          remove = cart.filter(id => id !== this.bookID);\n          console.log(this.BookID);\n          console.log(cart);\n          console.log(\"removed array \" + remove);\n          db.collection('Users').doc(this.id).set({\n            addrLine1: addr1,\n            addrLine2: addr2,\n            cart: remove,\n            city: city,\n            landmark: landmark,\n            mobile: mobile,\n            name: name,\n            orders: orders,\n            state: state,\n            wishlist: wishlist,\n            zipcode: zipcode,\n            email: email,\n            pfp: pfp\n          }).then(ref => {\n            this.$router.go();\n          });\n          console.log('Data updated successfully'); // alert('Item removed from wishlist successfully')\n          // alert(\"Item added to cart successfully.\") \n        });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n  },\n\n  mounted() {}\n\n};","map":{"version":3,"mappings":"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","names":["firebase","data","total","query","id","$route","quantity","parseInt","bookQuantity","price","bookPrice","props","methods","totalPrice","increment","$emit","decrement","removeFromCart","console","log","db","firestore","collection","doc","get","then","r","addr1","addrLine1","addr2","addrLine2","mobile","city","landmark","name","state","zipcode","cart","wishlist","wishList","orders","email","pfp","remove","filter","bookID","BookID","set","ref","$router","go","e","mounted"],"sourceRoot":"","sources":["D:\\coding\\e-commerce-website\\src\\components\\Search\\OrderCart.vue"],"sourcesContent":["<script>\r\nimport firebase from 'firebase/compat/app';\r\nexport default{\r\n    data(){\r\n        return{\r\n            total: 0,\r\n            // Use book ID here\r\n            // query: `{name: 'book', query:{id:this.bookID}}`\r\n            query: '/book',\r\n            id: this.$route.query.id,\r\n            quantity: parseInt(this.bookQuantity),\r\n            price: parseInt(this.bookPrice),\r\n            total: parseInt(this.bookPrice)*parseInt(this.bookQuantity),\r\n        }\r\n    },\r\n    props:[\"bookName\",\"bookAuthor\",\"bookSubject\",\"bookGenre\",\"bookDate\",\"bookImageURL\", \"bookPrice\", \"bookID\", \"bookQuantity\"],\r\n    methods:\r\n    {\r\n        totalPrice()\r\n        {\r\n            this.total= this.price*this.quantity\r\n        },\r\n        increment(){\r\n            this.quantity++;\r\n            // console.log(this.quantity)\r\n            this.totalPrice()\r\n            this.$emit(\"calculate\",this.price,1);\r\n        },\r\n        decrement(){\r\n            if(this.quantity > 0){\r\n            this.quantity--;\r\n            // console.log(this.quantity)\r\n            this.totalPrice()\r\n            // console.log('before this.$emit')\r\n            this.$emit(\"calculate\",-this.price,-1)\r\n            // console.log('after this.$emit')\r\n            }\r\n        },\r\n        removeFromCart(){\r\n            console.log(this.id)\r\n             const db = firebase.firestore(); \r\n        console.log(\"Inside removeFromWishList() method\")\r\n        try{\r\n        db.collection('Users').doc(this.id).get().then((r) => {\r\n            console.log(r.data())\r\n            var addr1 = r.data().addrLine1\r\n            var addr2 = r.data().addrLine2\r\n            var mobile = r.data().mobile\r\n            var city = r.data().city\r\n            var landmark = r.data().landmark\r\n            var name = r.data().name\r\n            var state = r.data().state\r\n            var zipcode = r.data().zipcode\r\n            var cart = r.data().cart\r\n            var wishlist = r.data().wishList\r\n            var orders = r.data().orders\r\n            var email = r.data().email\r\n            var pfp = r.data().pfp\r\n\r\n        // console.log(r.data());\r\n            // console.log(r.data())\r\n            // console.log(wishlist)\r\n            // wishlist.pop(this.id)\r\n            let remove = []\r\n            remove = cart.filter((id) => id !== this.bookID)\r\n            console.log(this.BookID)\r\n            console.log(cart)\r\n            console.log(\"removed array \" +remove)\r\n\r\n            db.collection('Users').doc(this.id).set({\r\n            addrLine1: addr1,\r\n            addrLine2: addr2,\r\n            cart: remove,\r\n            city: city,\r\n            landmark:landmark,\r\n            mobile: mobile,\r\n            name: name,\r\n            orders: orders,\r\n            state: state,\r\n            wishlist: wishlist,\r\n            zipcode: zipcode,\r\n            email: email,\r\n            pfp: pfp\r\n        }).then((ref) => {\r\n            this.$router.go()\r\n        });\r\n            \r\n        console.log('Data updated successfully')\r\n        // alert('Item removed from wishlist successfully')\r\n            // alert(\"Item added to cart successfully.\") \r\n        });\r\n\r\n            \r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n        \r\n        }\r\n    },\r\n    mounted(){\r\n            \r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n<div class=\"mt-4\">\r\n    <div class=\"w-6/6 border-2 h-40\">\r\n       <div class=\"flex\">\r\n           <div class=\" flex w-1/6\">\r\n             <!-- <router-link :to=\"query\"> -->\r\n                <img class=\"h-36 object-fill border-none w-28\" :src=\"bookImageURL\" alt=\"\">\r\n            <!-- </router-link> -->\r\n            </div>\r\n        <div class=\" w-2/6\">\r\n            <!-- <router-link :to=\"query\"> -->\r\n            <div class=\"mt-2 ml-2 font-bold text-gray-800 text-md cursor-pointer hover:text-secondary-1\">{{ bookName }}</div> \r\n            <!-- </router-link>  -->\r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">author: {{ bookAuthor }}</p> \r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">subject: {{ bookSubject }}</p> \r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">genre:{{ bookGenre }}</p> \r\n            <p class=\"mt-2 ml-2  text-black-400 text-sm cursor-pointer \">publication date:{{ bookDate }}</p>     \r\n        </div>\r\n        <div class=\"flex flex-col items-end justify-evenly mt-5\">\r\n            <div class=\"flex items-center\">\r\n                <div class=\"flex w-28\">\r\n                    <div class=\"py-1 h-8 w-8 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium\" @click=\"decrement()\">-</div>\r\n                    <div class=\"py-1 h-8 w-20 border-2 text-sm text-center  font-medium\">\r\n                        {{quantity}}</div>\r\n                    <div class=\"py-1 h-8 w-8 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium\" @click=\"increment()\">+</div>                    \r\n                </div>\r\n                <div class=\"ml-[70px] font-bold text-gray-800 text-md  \">₹{{this.price}}</div> \r\n                <div class=\"ml-24 font-bold text-gray-800 text-md  \">₹{{total}}</div>\r\n            </div>\r\n            <div>\r\n                <div class=\"py-2 w-36 text-sm text-white rounded-sm bg-secondary-1 text-center cursor-pointer hover:bg-primary-1 hover:text-gray-800 font-medium\" @click=\"removeFromCart\">\r\n                            Remove from Cart\r\n                        </div> \r\n            </div>\r\n        </div>         \r\n    </div>\r\n</div>\r\n</div>\r\n \r\n</template>\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}