{"ast":null,"code":"/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\n\"use strict\";\n\nconst fs = require(\"fs\");\n\nconst path = require(\"path\"); // macOS, Linux, and Windows all rely on these errors\n\n\nconst EXPECTED_ERRORS = new Set([\"EINVAL\", \"ENOENT\"]); // On Windows there is also this error in some cases\n\nif (process.platform === \"win32\") EXPECTED_ERRORS.add(\"UNKNOWN\");\n\nclass LinkResolver {\n  constructor() {\n    this.cache = new Map();\n  }\n  /**\r\n   * @param {string} file path to file or directory\r\n   * @returns {string[]} array of file and all symlinks contributed in the resolving process (first item is the resolved file)\r\n   */\n\n\n  resolve(file) {\n    const cacheEntry = this.cache.get(file);\n\n    if (cacheEntry !== undefined) {\n      return cacheEntry;\n    }\n\n    const parent = path.dirname(file);\n\n    if (parent === file) {\n      // At root of filesystem there can't be a link\n      const result = Object.freeze([file]);\n      this.cache.set(file, result);\n      return result;\n    } // resolve the parent directory to find links there and get the real path\n\n\n    const parentResolved = this.resolve(parent);\n    let realFile = file; // is the parent directory really somewhere else?\n\n    if (parentResolved[0] !== parent) {\n      // get the real location of file\n      const basename = path.basename(file);\n      realFile = path.resolve(parentResolved[0], basename);\n    } // try to read the link content\n\n\n    try {\n      const linkContent = fs.readlinkSync(realFile); // resolve the link content relative to the parent directory\n\n      const resolvedLink = path.resolve(parentResolved[0], linkContent); // recursive resolve the link content for more links in the structure\n\n      const linkResolved = this.resolve(resolvedLink); // merge parent and link resolve results\n\n      let result;\n\n      if (linkResolved.length > 1 && parentResolved.length > 1) {\n        // when both contain links we need to duplicate them with a Set\n        const resultSet = new Set(linkResolved); // add the link\n\n        resultSet.add(realFile); // add all symlinks of the parent\n\n        for (let i = 1; i < parentResolved.length; i++) {\n          resultSet.add(parentResolved[i]);\n        }\n\n        result = Object.freeze(Array.from(resultSet));\n      } else if (parentResolved.length > 1) {\n        // we have links in the parent but not for the link content location\n        result = parentResolved.slice();\n        result[0] = linkResolved[0]; // add the link\n\n        result.push(realFile);\n        Object.freeze(result);\n      } else if (linkResolved.length > 1) {\n        // we can return the link content location result\n        result = linkResolved.slice(); // add the link\n\n        result.push(realFile);\n        Object.freeze(result);\n      } else {\n        // neither link content location nor parent have links\n        // this link is the only link here\n        result = Object.freeze([// the resolve real location\n        linkResolved[0], // add the link\n        realFile]);\n      }\n\n      this.cache.set(file, result);\n      return result;\n    } catch (e) {\n      if (!EXPECTED_ERRORS.has(e.code)) {\n        throw e;\n      } // no link\n\n\n      const result = parentResolved.slice();\n      result[0] = realFile;\n      Object.freeze(result);\n      this.cache.set(file, result);\n      return result;\n    }\n  }\n\n}\n\nmodule.exports = LinkResolver;","map":{"version":3,"names":["fs","require","path","EXPECTED_ERRORS","Set","process","platform","add","LinkResolver","constructor","cache","Map","resolve","file","cacheEntry","get","undefined","parent","dirname","result","Object","freeze","set","parentResolved","realFile","basename","linkContent","readlinkSync","resolvedLink","linkResolved","length","resultSet","i","Array","from","slice","push","e","has","code","module","exports"],"sources":["W:/Coding/finalProject/e-commerce-website/node_modules/watchpack/lib/LinkResolver.js"],"sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\"use strict\";\r\n\r\nconst fs = require(\"fs\");\r\nconst path = require(\"path\");\r\n\r\n// macOS, Linux, and Windows all rely on these errors\r\nconst EXPECTED_ERRORS = new Set([\"EINVAL\", \"ENOENT\"]);\r\n\r\n// On Windows there is also this error in some cases\r\nif (process.platform === \"win32\") EXPECTED_ERRORS.add(\"UNKNOWN\");\r\n\r\nclass LinkResolver {\r\n\tconstructor() {\r\n\t\tthis.cache = new Map();\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} file path to file or directory\r\n\t * @returns {string[]} array of file and all symlinks contributed in the resolving process (first item is the resolved file)\r\n\t */\r\n\tresolve(file) {\r\n\t\tconst cacheEntry = this.cache.get(file);\r\n\t\tif (cacheEntry !== undefined) {\r\n\t\t\treturn cacheEntry;\r\n\t\t}\r\n\t\tconst parent = path.dirname(file);\r\n\t\tif (parent === file) {\r\n\t\t\t// At root of filesystem there can't be a link\r\n\t\t\tconst result = Object.freeze([file]);\r\n\t\t\tthis.cache.set(file, result);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t// resolve the parent directory to find links there and get the real path\r\n\t\tconst parentResolved = this.resolve(parent);\r\n\t\tlet realFile = file;\r\n\r\n\t\t// is the parent directory really somewhere else?\r\n\t\tif (parentResolved[0] !== parent) {\r\n\t\t\t// get the real location of file\r\n\t\t\tconst basename = path.basename(file);\r\n\t\t\trealFile = path.resolve(parentResolved[0], basename);\r\n\t\t}\r\n\t\t// try to read the link content\r\n\t\ttry {\r\n\t\t\tconst linkContent = fs.readlinkSync(realFile);\r\n\r\n\t\t\t// resolve the link content relative to the parent directory\r\n\t\t\tconst resolvedLink = path.resolve(parentResolved[0], linkContent);\r\n\r\n\t\t\t// recursive resolve the link content for more links in the structure\r\n\t\t\tconst linkResolved = this.resolve(resolvedLink);\r\n\r\n\t\t\t// merge parent and link resolve results\r\n\t\t\tlet result;\r\n\t\t\tif (linkResolved.length > 1 && parentResolved.length > 1) {\r\n\t\t\t\t// when both contain links we need to duplicate them with a Set\r\n\t\t\t\tconst resultSet = new Set(linkResolved);\r\n\t\t\t\t// add the link\r\n\t\t\t\tresultSet.add(realFile);\r\n\t\t\t\t// add all symlinks of the parent\r\n\t\t\t\tfor (let i = 1; i < parentResolved.length; i++) {\r\n\t\t\t\t\tresultSet.add(parentResolved[i]);\r\n\t\t\t\t}\r\n\t\t\t\tresult = Object.freeze(Array.from(resultSet));\r\n\t\t\t} else if (parentResolved.length > 1) {\r\n\t\t\t\t// we have links in the parent but not for the link content location\r\n\t\t\t\tresult = parentResolved.slice();\r\n\t\t\t\tresult[0] = linkResolved[0];\r\n\t\t\t\t// add the link\r\n\t\t\t\tresult.push(realFile);\r\n\t\t\t\tObject.freeze(result);\r\n\t\t\t} else if (linkResolved.length > 1) {\r\n\t\t\t\t// we can return the link content location result\r\n\t\t\t\tresult = linkResolved.slice();\r\n\t\t\t\t// add the link\r\n\t\t\t\tresult.push(realFile);\r\n\t\t\t\tObject.freeze(result);\r\n\t\t\t} else {\r\n\t\t\t\t// neither link content location nor parent have links\r\n\t\t\t\t// this link is the only link here\r\n\t\t\t\tresult = Object.freeze([\r\n\t\t\t\t\t// the resolve real location\r\n\t\t\t\t\tlinkResolved[0],\r\n\t\t\t\t\t// add the link\r\n\t\t\t\t\trealFile\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\tthis.cache.set(file, result);\r\n\t\t\treturn result;\r\n\t\t} catch (e) {\r\n\t\t\tif (!EXPECTED_ERRORS.has(e.code)) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t\t// no link\r\n\t\t\tconst result = parentResolved.slice();\r\n\t\t\tresult[0] = realFile;\r\n\t\t\tObject.freeze(result);\r\n\t\t\tthis.cache.set(file, result);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n}\r\nmodule.exports = LinkResolver;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}