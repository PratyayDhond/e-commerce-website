{"ast":null,"code":"import Header from '../../components/Header/Header.vue';\nimport Filter from '../../components/Filter/Filter.vue';\nimport LatestBooks from '../../components/HomePage/LatestBooks.vue';\nimport ResultBook from '../../components/Search/ResultBook.vue';\nimport BookCoverCat from '../../components/HomePage/BookCoverCat.vue';\nimport Sidebar from '../../components/User/OrderDetailsView/Sidebar.vue';\nimport OrderHistory from '../../components/User/OrderHistoryView/OrderHistory.vue';\nimport OrderDetails from '../../components/User/OrderDetailsView/OrderDetails.vue';\nimport firebase from 'firebase/compat/app';\nexport default {\n  data() {\n    return {\n      orderedDetails: [],\n      id: this.$route.query.id,\n      isSorted: false,\n      tempOrders: new Map(),\n      tempOrdersTime: new Set(),\n      index: 0,\n      array: []\n    };\n  },\n\n  components: {\n    Header,\n    Filter,\n    LatestBooks,\n    ResultBook,\n    BookCoverCat,\n    Sidebar,\n    OrderHistory,\n    OrderDetails\n  },\n\n  async created() {\n    let obj = {};\n    let bookObj = {};\n    var orders = [];\n    await firebase.firestore().collection(\"Users\").doc(this.id).get().then(snapshot => {\n      orders = snapshot.data().orders;\n      obj['shipTo'] = snapshot.data().name;\n      obj['addressline1'] = snapshot.data().addrLine1;\n      obj['addressline2'] = snapshot.data().addrLine2;\n      obj['city'] = snapshot.data().city;\n      obj['landmark'] = snapshot.data().landmark;\n      obj['state'] = snapshot.data().state;\n      obj['pincode'] = snapshot.data().zipcode; // console.log(orders)\n    });\n    orders.forEach(async order => {\n      obj['orderID'] = order;\n      await firebase.firestore().collection(\"Orders\").doc(order).get().then(snapshot => {\n        //  console.log(snapshot.data())  \n        obj['orderDate'] = snapshot.data().orderDate;\n        var timestamp = snapshot.data().expectedDate;\n        var time = new Date(timestamp.seconds * 1000);\n        var month = time.getMonth() < 10 ? \"0\" + time.getMonth() : time.getMonth();\n        var date = time.getDate() < 10 ? \"0\" + time.getDate() : time.getDate();\n        var year = time.getFullYear();\n        obj['bookDelivery'] = date + \"-\" + month + \"-\" + year;\n        obj['orderCompleted'] = snapshot.data().orderCompleted;\n        snapshot.data().books.forEach(async book => {\n          // console.log(book);\n          // console.log(obj);\n          await firebase.firestore().collection('books').doc(book).get().then(snapshot => {\n            bookObj['bookName'] = snapshot.data().name;\n            bookObj['bookPrice'] = snapshot.data().price;\n            bookObj['bookImageURL'] = snapshot.data().url;\n            bookObj['bookYear'] = snapshot.data().publicationYear;\n            bookObj['bookGenre'] = snapshot.data().genre || \"\";\n            bookObj['bookAuthor'] = snapshot.data().author || \"\";\n          }).finally(() => {\n            bookObj.shipTo = obj.shipTo;\n            bookObj.addressline1 = obj.addressline1;\n            bookObj.addressline2 = obj.addressline2;\n            bookObj.city = obj.city;\n            bookObj.state = obj.state;\n            bookObj.orderID = obj.orderID;\n            bookObj.pincode = obj.pincode;\n            bookObj.orderDate = obj.orderDate;\n            bookObj.bookDelivery = obj.bookDelivery;\n            this.orderedDetails.push(bookObj);\n            this.array[this.index++] = bookObj;\n            console.log(bookObj); // this.tempOrders.add(bookObj);\n\n            bookObj = {};\n          });\n        });\n      });\n      this.sort();\n    });\n  },\n\n  methods: {\n    sort() {\n      if (this.isSorted === false) {\n        this.isSorted = true;\n        console.log(this.array); // console.log(JSON.parse(JSON.stringify(this.orderedDetails.get())))\n\n        console.log(\"Inside sort\");\n        var tempArr = [];\n        console.log(this.orderedDetails);\n        this.orderedDetails.forEach(order => {\n          console.log(order);\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AACA,OAAOA,MAAP,MAAmB,oCAAnB;AACA,OAAOC,MAAP,MAAmB,oCAAnB;AACA,OAAOC,WAAP,MAAwB,2CAAxB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,YAAP,MAAyB,4CAAzB;AACA,OAAOC,OAAP,MAAoB,oDAApB;AACA,OAAOC,YAAP,MAAyB,yDAAzB;AACA,OAAOC,YAAP,MAAyB,yDAAzB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,eAAc;EACVC,IAAI,GAAE;IACF,OAAM;MACFC,cAAc,EAAE,EADd;MAEFC,EAAE,EAAE,KAAKC,MAAL,CAAYC,KAAZ,CAAkBF,EAFpB;MAGFG,QAAQ,EAAE,KAHR;MAIFC,UAAU,EAAE,IAAIC,GAAJ,EAJV;MAKFC,cAAc,EAAE,IAAIC,GAAJ,EALd;MAMFC,KAAK,EAAE,CANL;MAOFC,KAAK,EAAE;IAPL,CAAN;EASH,CAXS;;EAYVC,UAAU,EAAC;IACXrB,MADW;IAEXC,MAFW;IAGXC,WAHW;IAIXC,UAJW;IAKXC,YALW;IAMXC,OANW;IAOXC,YAPW;IAQXC;EARW,CAZD;;EAsBV,MAAMe,OAAN,GAAe;IACX,IAAIC,GAAE,GAAI,EAAV;IACA,IAAIC,OAAM,GAAI,EAAd;IACA,IAAIC,MAAK,GAAI,EAAb;IACA,MAAMjB,QAAQ,CAACkB,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyCC,GAAzC,CAA6C,KAAKjB,EAAlD,EAAsDkB,GAAtD,GAA4DC,IAA5D,CAAkEC,QAAD,IAAc;MACjFN,MAAK,GAAIM,QAAQ,CAACtB,IAAT,GAAgBgB,MAAzB;MACAF,GAAG,CAAC,QAAD,CAAH,GAAgBQ,QAAQ,CAACtB,IAAT,GAAgBuB,IAAhC;MACAT,GAAG,CAAC,cAAD,CAAH,GAAsBQ,QAAQ,CAACtB,IAAT,GAAgBwB,SAAtC;MACAV,GAAG,CAAC,cAAD,CAAH,GAAsBQ,QAAQ,CAACtB,IAAT,GAAgByB,SAAtC;MACAX,GAAG,CAAC,MAAD,CAAH,GAAcQ,QAAQ,CAACtB,IAAT,GAAgB0B,IAA9B;MACAZ,GAAG,CAAC,UAAD,CAAH,GAAkBQ,QAAQ,CAACtB,IAAT,GAAgB2B,QAAlC;MACAb,GAAG,CAAC,OAAD,CAAH,GAAeQ,QAAQ,CAACtB,IAAT,GAAgB4B,KAA/B;MACAd,GAAG,CAAC,SAAD,CAAH,GAAiBQ,QAAQ,CAACtB,IAAT,GAAgB6B,OAAjC,CARiF,CAUjF;IACH,CAXK,CAAN;IAaAb,MAAM,CAACc,OAAP,CAAe,MAAMC,KAAN,IAAgB;MAC3BjB,GAAG,CAAC,SAAD,CAAH,GAAiBiB,KAAjB;MACA,MAAMhC,QAAQ,CAACkB,SAAT,GAAqBC,UAArB,CAAgC,QAAhC,EAA0CC,GAA1C,CAA8CY,KAA9C,EAAqDX,GAArD,GAA2DC,IAA3D,CAAgEC,QAAO,IAAK;QAC9E;QACCR,GAAG,CAAC,WAAD,CAAH,GAAmBQ,QAAQ,CAACtB,IAAT,GAAgBgC,SAAnC;QACA,IAAIC,SAAQ,GAAIX,QAAQ,CAACtB,IAAT,GAAgBkC,YAAhC;QACA,IAAIC,IAAG,GAAI,IAAIC,IAAJ,CAASH,SAAS,CAACI,OAAV,GAAoB,IAA7B,CAAX;QACA,IAAIC,KAAI,GAAIH,IAAI,CAACI,QAAL,KAAkB,EAAlB,GAAuB,MAAMJ,IAAI,CAACI,QAAL,EAA7B,GAA+CJ,IAAI,CAACI,QAAL,EAA3D;QACA,IAAIC,IAAG,GAAIL,IAAI,CAACM,OAAL,KAAiB,EAAjB,GAAsB,MAAMN,IAAI,CAACM,OAAL,EAA5B,GAA6CN,IAAI,CAACM,OAAL,EAAxD;QACA,IAAIC,IAAG,GAAIP,IAAI,CAACQ,WAAL,EAAX;QACA7B,GAAG,CAAC,cAAD,CAAH,GAAsB0B,IAAG,GAAI,GAAP,GAAaF,KAAb,GAAqB,GAArB,GAA2BI,IAAjD;QACA5B,GAAG,CAAC,gBAAD,CAAH,GAAwBQ,QAAQ,CAACtB,IAAT,GAAgB4C,cAAxC;QACAtB,QAAQ,CAACtB,IAAT,GAAgB6C,KAAhB,CAAsBf,OAAtB,CAA8B,MAAMgB,IAAN,IAAc;UACzC;UACA;UACA,MAAM/C,QAAQ,CAACkB,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyCC,GAAzC,CAA6C2B,IAA7C,EAAmD1B,GAAnD,GAAyDC,IAAzD,CAA8DC,QAAO,IAAK;YAC5EP,OAAO,CAAC,UAAD,CAAP,GAAsBO,QAAQ,CAACtB,IAAT,GAAgBuB,IAAtC;YACAR,OAAO,CAAC,WAAD,CAAP,GAAuBO,QAAQ,CAACtB,IAAT,GAAgB+C,KAAvC;YACAhC,OAAO,CAAC,cAAD,CAAP,GAA0BO,QAAQ,CAACtB,IAAT,GAAgBgD,GAA1C;YACAjC,OAAO,CAAC,UAAD,CAAP,GAAqBO,QAAQ,CAACtB,IAAT,GAAgBiD,eAArC;YACAlC,OAAO,CAAC,WAAD,CAAP,GAAuBO,QAAQ,CAACtB,IAAT,GAAgBkD,KAAhB,IAAyB,EAAhD;YACAnC,OAAO,CAAC,YAAD,CAAP,GAAwBO,QAAQ,CAACtB,IAAT,GAAgBmD,MAAhB,IAA0B,EAAlD;UACH,CAPK,EAOHC,OAPG,CAOK,MAAM;YACbrC,OAAO,CAACsC,MAAR,GAAiBvC,GAAG,CAACuC,MAArB;YACAtC,OAAO,CAACuC,YAAR,GAAuBxC,GAAG,CAACwC,YAA3B;YACAvC,OAAO,CAACwC,YAAR,GAAuBzC,GAAG,CAACyC,YAA3B;YACAxC,OAAO,CAACW,IAAR,GAAeZ,GAAG,CAACY,IAAnB;YACAX,OAAO,CAACa,KAAR,GAAgBd,GAAG,CAACc,KAApB;YACAb,OAAO,CAACyC,OAAR,GAAkB1C,GAAG,CAAC0C,OAAtB;YACAzC,OAAO,CAAC0C,OAAR,GAAkB3C,GAAG,CAAC2C,OAAtB;YACA1C,OAAO,CAACiB,SAAR,GAAoBlB,GAAG,CAACkB,SAAxB;YACAjB,OAAO,CAAC2C,YAAR,GAAuB5C,GAAG,CAAC4C,YAA3B;YACA,KAAKzD,cAAL,CAAoB0D,IAApB,CAAyB5C,OAAzB;YACA,KAAKJ,KAAL,CAAW,KAAKD,KAAL,EAAX,IAA2BK,OAA3B;YACA6C,OAAO,CAACC,GAAR,CAAY9C,OAAZ,EAZa,CAab;;YACAA,OAAM,GAAI,EAAV;UACH,CAtBK,CAAN;QAuBF,CA1BD;MA2BJ,CArCK,CAAN;MAsCA,KAAK+C,IAAL;IACH,CAzCD;EA2CH,CAlFS;;EAmFVC,OAAO,EAAE;IACLD,IAAI,GAAE;MACF,IAAG,KAAKzD,QAAL,KAAkB,KAArB,EAA2B;QACvB,KAAKA,QAAL,GAAgB,IAAhB;QACAuD,OAAO,CAACC,GAAR,CAAY,KAAKlD,KAAjB,EAFuB,CAGvB;;QACAiD,OAAO,CAACC,GAAR,CAAY,aAAZ;QACA,IAAIG,OAAM,GAAI,EAAd;QACAJ,OAAO,CAACC,GAAR,CAAY,KAAK5D,cAAjB;QACA,KAAKA,cAAL,CAAoB6B,OAApB,CAA4BC,KAAI,IAAK;UACrC6B,OAAO,CAACC,GAAR,CAAY9B,KAAZ;QACH,CAFG;MAGJ;IACH;;EAbI;AAnFC,CAAd","names":["Header","Filter","LatestBooks","ResultBook","BookCoverCat","Sidebar","OrderHistory","OrderDetails","firebase","data","orderedDetails","id","$route","query","isSorted","tempOrders","Map","tempOrdersTime","Set","index","array","components","created","obj","bookObj","orders","firestore","collection","doc","get","then","snapshot","name","addrLine1","addrLine2","city","landmark","state","zipcode","forEach","order","orderDate","timestamp","expectedDate","time","Date","seconds","month","getMonth","date","getDate","year","getFullYear","orderCompleted","books","book","price","url","publicationYear","genre","author","finally","shipTo","addressline1","addressline2","orderID","pincode","bookDelivery","push","console","log","sort","methods","tempArr"],"sourceRoot":"","sources":["W:\\Coding\\finalProject\\e-commerce-website\\src\\views\\OrderDetails\\OrderDetails.vue"],"sourcesContent":["<script>\r\nimport Header from '../../components/Header/Header.vue';\r\nimport Filter from '../../components/Filter/Filter.vue';\r\nimport LatestBooks from '../../components/HomePage/LatestBooks.vue';\r\nimport ResultBook from '../../components/Search/ResultBook.vue';\r\nimport BookCoverCat from '../../components/HomePage/BookCoverCat.vue';\r\nimport Sidebar from '../../components/User/OrderDetailsView/Sidebar.vue';\r\nimport OrderHistory from '../../components/User/OrderHistoryView/OrderHistory.vue';\r\nimport OrderDetails from '../../components/User/OrderDetailsView/OrderDetails.vue';\r\nimport firebase from 'firebase/compat/app'; \r\nexport default{\r\n    data(){\r\n        return{\r\n            orderedDetails: [],\r\n            id: this.$route.query.id,\r\n            isSorted: false,\r\n            tempOrders: new Map(),\r\n            tempOrdersTime: new Set(),\r\n            index: 0,\r\n            array: [],\r\n        }\r\n    },\r\n    components:{\r\n    Header,\r\n    Filter,\r\n    LatestBooks,\r\n    ResultBook,\r\n    BookCoverCat,\r\n    Sidebar,\r\n    OrderHistory,\r\n    OrderDetails\r\n    },\r\n    async created(){\r\n        let obj = {};\r\n        let bookObj = {};\r\n        var orders = [];\r\n        await firebase.firestore().collection(\"Users\").doc(this.id).get().then((snapshot) => {\r\n            orders = snapshot.data().orders;\r\n            obj['shipTo'] = snapshot.data().name;\r\n            obj['addressline1'] = snapshot.data().addrLine1;\r\n            obj['addressline2'] = snapshot.data().addrLine2;  \r\n            obj['city'] = snapshot.data().city;\r\n            obj['landmark'] = snapshot.data().landmark;\r\n            obj['state'] = snapshot.data().state;\r\n            obj['pincode'] = snapshot.data().zipcode;\r\n\r\n            // console.log(orders)\r\n        })  \r\n\r\n        orders.forEach(async order =>  {\r\n            obj['orderID'] = order;\r\n            await firebase.firestore().collection(\"Orders\").doc(order).get().then(snapshot => {\r\n                //  console.log(snapshot.data())  \r\n                 obj['orderDate'] = snapshot.data().orderDate;\r\n                 var timestamp = snapshot.data().expectedDate;\r\n                 var time = new Date(timestamp.seconds * 1000);\r\n                 var month = time.getMonth() < 10 ? \"0\" + time.getMonth() : time.getMonth();\r\n                 var date = time.getDate() < 10 ? \"0\" + time.getDate() : time.getDate();\r\n                 var year = time.getFullYear();\r\n                 obj['bookDelivery'] = date + \"-\" + month + \"-\" + year;  \r\n                 obj['orderCompleted'] = snapshot.data().orderCompleted;\r\n                 snapshot.data().books.forEach(async book => {\r\n                    // console.log(book);\r\n                    // console.log(obj);\r\n                    await firebase.firestore().collection('books').doc(book).get().then(snapshot => {\r\n                        bookObj['bookName'] = snapshot.data().name;\r\n                        bookObj['bookPrice'] = snapshot.data().price;\r\n                        bookObj['bookImageURL'] = snapshot.data().url;\r\n                        bookObj['bookYear']= snapshot.data().publicationYear;\r\n                        bookObj['bookGenre'] = snapshot.data().genre || \"\";\r\n                        bookObj['bookAuthor'] = snapshot.data().author || \"\";\r\n                    }).finally(() => {\r\n                        bookObj.shipTo = obj.shipTo;\r\n                        bookObj.addressline1 = obj.addressline1 \r\n                        bookObj.addressline2 = obj.addressline2 \r\n                        bookObj.city = obj.city \r\n                        bookObj.state = obj.state \r\n                        bookObj.orderID = obj.orderID \r\n                        bookObj.pincode = obj.pincode\r\n                        bookObj.orderDate = obj.orderDate\r\n                        bookObj.bookDelivery = obj.bookDelivery\r\n                        this.orderedDetails.push(bookObj);\r\n                        this.array[this.index++] = bookObj;\r\n                        console.log(bookObj)\r\n                        // this.tempOrders.add(bookObj);\r\n                        bookObj = {};\r\n                    })\r\n                 })             \r\n            })\r\n            this.sort();\r\n        });\r\n\r\n    },\r\n    methods: {\r\n        sort(){\r\n            if(this.isSorted === false){\r\n                this.isSorted = true;\r\n                console.log(this.array)\r\n                // console.log(JSON.parse(JSON.stringify(this.orderedDetails.get())))\r\n                console.log(\"Inside sort\");\r\n                var tempArr = [];\r\n                console.log(this.orderedDetails )\r\n                this.orderedDetails.forEach(order => {\r\n                console.log(order);\r\n            })\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div class=\"relative\" >\r\n        <!-- Header -->\r\n        <div class=\"\">\r\n            <Header :userID=\"id\" class=\"fixed z-10 w-full top-0\" />\r\n        </div>\r\n        \r\n        <!-- Filter -->\r\n        <div class=\"absoulute\">\r\n            <div class=\"\">              \r\n                <div class=\"fixed w-full\">\r\n                    <Sidebar id=\"id\"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Order History -->\r\n        <div class=\"mt-20 absolute top-6 left-96\">\r\n            <div class=\"w-240\">\r\n                <div class=\"text-3xl font-bold text-gray-700\">ORDER DETAILS</div>\r\n                <div class=\"flex mt-2 justify-between px-4 pb-4\">\r\n                    <div class=\"w-80 flex\">\r\n                        <div class=\"mr-8\">\r\n                            <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center\" >Product</div>\r\n                        </div>\r\n                        <div>\r\n                            <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center\" >Details</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"w-15\">\r\n                        <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center -ml-5\" >Price</div>\r\n                    </div>\r\n                    <div class=\"w-64\">\r\n                        <div class=\"bg-primary-1 px-2 rounded-sm w-20 text-center\" >Delivery</div>\r\n                    </div>\r\n                    \r\n                    \r\n                    \r\n                </div>\r\n                <div v-for=\"item in orderedDetails\" :key=\"item.id\">\r\n                    <OrderDetails :orderID=\"item.orderID\" :bookName=\"item.bookName\" :bookPrice=\"item.bookPrice\" :bookImageURL=\"item.bookImageURL\" :orderDate=\"item.orderDate\" :shipTo=\"item.shipTo\" :bookYear=\"item.bookYear\" :bookGenre=\"item.bookGenre\" :bookAuthor=\"item.bookAuthor\" :bookDelivery=\"item.bookDelivery\" :addressline1=\"item.addressline1\" :addressline2=\"item.addressline2\" :city=\"item.city\" :landmark=\"item.landmark\" :state=\"item.state\" :pincode=\"item.pincode\" />\r\n                    </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n    \r\n        \r\n</template>\r\n\r\n<style>\r\n</style>\r\n\r\n                    <!-- <ResultBook :bookName=\"item.bookName\" :bookDate=\"item.bookDate\" :bookLanguage=\"item.bookLanguage\" :bookCover=\"item.bookCover\" :bookPrice=\"item.bookPrice\" :bookImageURL=\"item.bookImageURL\"/> -->"]},"metadata":{},"sourceType":"module"}